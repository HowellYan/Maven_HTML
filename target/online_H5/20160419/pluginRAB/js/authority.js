define(["utils","jquery","jquery-jtemplates"],function(P,G,d){var f=User.getProduct();var E=useInfoIOS.custCode;var aj=useInfoIOS.staffCode;var z=useInfoIOS.prtnCode;var T="1";var e="2";var af=0;var I="";var ad=useInfoIOS.hadEpt;var u=useInfoIOS.bankMode;var i=useInfoIOS.productType;var ak=useInfoIOS.prinType;var J=false;var a=false;var j=null;var o=null;var Z="";var M="";var L="";var l="";var ae="";var p="";var C="";var B="";var h="";var k="";var w="2";var S="";var U="";var ah=null;var V=P.urlParameters();var K=true;var D=false;var n="";G("#loading").hide();console.log("hadEptinfo==============="+ad);console.log("useInfoIOS=="+JSON.stringify(useInfoIOS));console.log("hadEptinfo==="+ad);console.log("bankMode==="+u);console.log("productType==="+i);console.log("urlParameters==="+JSON.stringify(V));if(ad=="1"){console.log("8888888已经认22证和开通添益宝了-------");G("#showapplicantname").unbind();G("#authapplyname").attr("readonly","true");G("#authIdNo").attr("readonly","true");G("#tybTips").show();console.log("8888888已经认证和开通333222222222添益宝了-------");N("0",true)}else{if(V.worker_recetification==="worker"){N("2",true)}else{G("#choseShop").show();G("#tybTips").hide();App.setTitle("选择认证类型")}}console.log("this showDialog");ai();ac();G(".main_rz").on("click",N);function N(am,al){console.log("pageIds==========="+JSON.stringify(P.pageIds));af=G(this).data("code");console.log("merchantType1= "+af);console.log("merchantType typeof= "+typeof af);if(al){af=am}console.log("进来了： "+af+" "+w);if(af=="1"&&w==="2"){Dialog.showAlertTwoBtnDialog("提醒","商户认证为企业商户，酬金为月度结算，商户需自行前往当地税务局，开具种类为“服务费”或“酬金”的税务发票寄回支付公司，支付公司审核后可发放。","知道了","取消","",function(an){w=an;console.log("goContinual================"+w);if(w==="1"){N(af,true)}});return}G("#licenceNomber").show();O(af);console.log("merchantType======="+af);console.log("info:page authority onLoad ");G("#autoNextTwoButton").on("click",Q);c();G("#showapplicantname").off("click");G("#showapplicantname").on("click",A);af+="";if(af==="1"){document.title="企业商户认证";App.setTitle("企业商户认证");G("#setTitle").val(1);v("modify_shopName","商户名称");v("modify_shopAddress","企业地址");R("modify_shopAddress","请填写公司企业地址");v("modify_jyz","代理人");R("modify_jyz","请填写代理申请人姓名");R("authIdNo","代理申请人身份证号码","me");R("authemail","请填写代理申请人联系邮箱","me");G("#gerenShow").hide();G("#qiyeShow").show();G("#showShoptype").hide();G(".yzrz").show();G("#yarz2").show();G("#ygrz_next_Btn").hide();console.log("企业商户认证=================")}else{if(af==="0"){document.title="个体商户认证";App.setTitle("个体商户认证");G("#setTitle").val(0);v("modify_shopName","商铺名称");v("modify_shopAddress","商铺地址");R("modify_shopAddress","请填写商铺地址");v("modify_jyz","经营者");R("modify_jyz","营业执照负责人一栏");R("authIdNo","经营者身份证号码","me");R("authemail","请填写有效联系邮箱","me");G("#gerenShow").show();G("#qiyeShow").hide();G("#showShoptype").show();G(".yzrz").show();G("#yarz2").show();G("#ygrz_next_Btn").hide();console.log("个体商户认证=================")}else{if(af==="2"){document.title="员工认证";App.setTitle("员工认证");G("#setTitle").val(2);v("modify_jyz","申请人姓名");R("modify_jyz","请填写");G(".yzrz").hide();G("#yarz2").hide();G("#ygrz_next_Btn").show();G("#showapplicantname").off("click")}}}}G(".ornotagreement").on("click",function(){G(".ornotagreement").toggleClass("c_sub_bg");G(".showxieyi").toggleClass("hidexieyi");if(G(".ornotagreement").is(".c_sub_bg")){T="0";e="0";console.log("ornotagreement=="+T)}else{T="1";e="2";G(".agreement").removeClass("c_sub_bg");console.log("ornotagreement=="+T)}});G(".agreement").on("click",function(){G(".agreement").toggleClass("c_sub_bg");if(G(".agreement").is(".c_sub_bg")){e="0";console.log("agreement=="+e)}else{e="2";console.log("agreement=="+e)}});G("#business_record").on("click",function(){console.log("111111");Y("page_record","page_know","page_fuwu","file/tyb.html")});document.getElementById("business_know").onclick=function(){console.log("22222");Y("page_know","page_record","page_fuwu","file/jjxy.html")};document.getElementById("business_fuwu").onclick=function(){console.log("333333");Y("page_fuwu","page_record","page_know","file/zjtz.html")};document.getElementById("fat_btn").onclick=function(){P.back()};function W(){P.dismissDialog();P.showDialog("正在查询你的信息，请稍等..");var an={staffCode:aj,channelCode:"20",custCode:E,merId:z,tmnNum:"440106014113",keep:P.getKeep(),bisChannel:bisChannel,prtnCode:S};P.getDeviceInfo(an);var al=Security.getSign(an);an.sign=al;an.signVer="2";console.log("企业编码查询SAut004 入参："+JSON.stringify((an)));var am=function(ar){console.log("企业编码查询SAut004 出参： Result --> "+JSON.stringify(ar));document.title="所属企业";App.setTitle("所属企业");P.dismissDialog();if(ar.code==TOKENLOST){var aq=function(){User.login(f)};P.alert("⊙_⊙,为了您的账户安全，请您重新登录。",aq);return}else{if(ar.code!="000000"){if(ar.code=="011053"){P.alert("商户编码有误，请重新输入！")}return}}var ap="";var ao=false;D=false;K=true;if(ar.operFlag==="S0F"){ap="已冻结"}else{if(ar.operFlag==="S0G"){ap="已销户"}else{if(ar.operFlag==="S0X"){ap="无效"}else{if(ar.operFlag==="S0A"){if(ar.lastapprStat==="S0V"){ap="待审核"}else{if(ar.lastapprStat==="S0F"){ap="审核不通过"}else{if(ar.lastapprStat==="S0A"){ao=true}}}}else{ap="无效"}}}}if(!ao){P.toNextPage("company_chackout");n="您的账号"+ap+",请返回再试!";D=true}console.log("JSONResult.prntCode==========="+ar.prntCode);if(!ar.prntCode){K=false;P.alert("亲，您所查询的商家不存在！");return}S=ar.prntCode||S;U=ar.custName||"未能查到商家名称";console.log("prtnCode============"+S);G("#SAut004_val").html(U);P.toNextPage("company_chackout");if(V.worker_recetification==="worker"){P.pageIds.shift()}};P.sendPostRequest(URL+Method.SAut004,an,am,null)}G("#company_next").on("click",function(){if(!P.notEmptyVail("company_code_val","请输入企业代码")){verifyFocus("company_code_val");return}S=G("#company_code_val").val();W()});G("#company_chackout_next").on("click",function(){console.log("prinType===="+ak);console.log("josnDLS========"+K);if(!K&&ak!=="Pt901"){P.alert("很抱歉，您不是代理商，没有操作权限！");return}if(D){P.alert(n);return}P.toNextPage("authorityPage")});function Y(aq,ao,an,ap){console.log("协议");P.toNextPage("page_record_father");var am=document.getElementById(aq);console.log("xieyi");am.innerHTML="";document.getElementById(ao).innerHTML="";document.getElementById(an).innerHTML="";var al=G(am).setTemplateURL(ap);al.processTemplate(null)}function ac(){m("authIdNo");m("authemail");m("company_code_val")}function m(al){G("#"+al).on("input",function(){var an=G(this).val();var am=G(this).siblings(".clearInfo");if(an.length>0){am.show();am.click(function(){am.hide();G("#"+al).val("")})}else{am.hide()}if(al=="authIdNo"){G(this).val(an.replace(/[^\dXx.]/g,""))}})}function v(am,al){G("#"+am).html(al)}function R(an,am,al){if(al==="me"){G("#"+an).attr("placeholder",am)}else{G("#"+an).siblings("input").attr("placeholder",am)}}function x(){var an={staffCode:aj,channelCode:"20",custCode:E,merId:z,tmnNum:"440106014113",bisChannel:bisChannel,keep:P.getKeep()};P.getDeviceInfo(an);var al=Security.getSign(an);an.sign=al;an.signVer="2";G("#kaotong_agreement").show();console.log("infoInit() 入参："+JSON.stringify((an)));var am=function(aq){console.log("info:Method:SReg003  出参： Result --> "+JSON.stringify(aq));P.dismissDialog();document.title="修改认证";App.setTitle("修改认证");if(aq.code==TOKENLOST){var ao=function(){User.login(f)};P.alert("⊙_⊙,为了您的账户安全，请您重新登录。",ao);return}else{if(aq.code!="000000"){P.alert("亲,获取您的基本信息失败，"+aq.content);return}}if(aq.authStat=="A00"){var ao=function(){P.back()};P.alert("您的认证信息还在审核中，请耐心等候... ...",ao);return}else{if(aq.authStat=="A01"){console.log("merchantType==="+af);console.log("bankMode==="+u);console.log("productType==="+i);if(af*1==0){if(i=="2"){if(u=="BT1001"||u=="BT1013"){G("#kaotong_agreement").show()}else{G("#kaotong_agreement").hide()}}else{G("#kaotong_agreement").hide()}}else{G("#kaotong_agreement").hide()}console.log('JSONResult.authStat == "A01"'+aq.authStat)}else{if(aq.authStat=="A02"||aq.authStat=="A99"){console.log("JSONResult.authStat=="+aq.authStat);document.title="修改认证";App.setTitle("修改认证");console.log("params.authStat=="+an.authStat);console.log("hadEptinfo==="+ad);if(an.authStat=="A02"&&ad=="1"){console.log("已经认证和开通添益宝了-------");G("#showapplicantname").unbind();G("#showapplicantname_bggray").addClass("gray_bg");G("#showapplicantname_bggray #authapplyname").addClass("gray_bg");G("#authIdNo").attr("readonly","true");G("#show_creditcard").addClass("gray_bg");G("#show_creditcard #authIdNo").addClass("gray_bg");G("[name = merchantTypeChoose]").unbind();console.log("已经认证和开通222222222添益宝了-------")}}else{if(aq.authStat=="A03"){var ao=function(){P.back()};P.alert("您已经认证...",ao);return}}}}console.log("SReg003出参000000"+JSON.stringify(aq));G("#authshanghum").val(aq.prtnName);G("#merchantName").val(aq.prtnName);G("#authapplyname").val(aq.applyer);G("#applicantName").val(aq.applyer);G("#authIdNo").val(aq.appCertNo);t=aq.areaCode;var ap={code:t};var ar=DB_Data.getProCityDistric(t);G("#authareas").val(ar.ProvinceName+"-"+ar.CityName+"-"+ar.CountyName)};P.sendPostRequest(URL+Method.SReg003,an,am,null)}G("[name=textInput]").click(function(){G(this).children("div").children("div").children("input").onfocus()});G("[name=upImage]").click(function(){console.log("------click------");var al=G(this).attr("id");var am=parseInt(G(this).text());var an={LOGID:G("#"+al+"LogId").text(),TYPE:am,WHEATHERTHREEINONE:J};console.log("上传图片入参--> "+JSON.stringify(an));Scanner.handlerVerifyPhoto(an,function(aq){var ap=JSON.stringify(aq);ap=ap.substring(1,ap.length-1);console.log("JSONResult====================="+ap);console.log("id============================="+al);if(al==="image12"&&!!ap){G("#imageLogId").text(ap);G("#image3LogId").text(ap);G("#image4LogId").text(ap);J=true;a=true;G("#okImg").show();G("#noneImg").hide();G("#okImg3").show();G("#noneImg3").hide();G("#okImg4").show();G("#noneImg4").hide()}if(al==="image"||al==="image3"||al==="image4"){J=false;a=false}G("#"+al+"LogId").text(ap);console.log("logId11111111============================="+ap);function ar(){console.log("显示图片！！");var at={LOGID:G("#"+al+"LogId").text(),TYPE:am,WHEATHERTHREEINONE:J};Scanner.handlerVerifyPhoto(at,function(av){var au=JSON.stringify(av);au=au.substring(1,au.length-1);if(al==="image12"&&!!au){G("#imageLogId").text(au);G("#image3LogId").text(au);G("#image4LogId").text(au)}G("#"+al+"LogId").text(au);console.log("logId2222222222============================="+au)},function(){Toast.makeText("取消上传！",LENGTHLONG)})}var ao=al.replace("image","");G("#okImg"+ao).show();G("#noneImg"+ao).hide();G("#showImgTitle"+ao).unbind();G("#showImgTitle"+ao).click(ar)},function(){Toast.makeText("取消上传！",LENGTHLONG)})});function ai(){for(var al=1;al<=18;al++){G("#showImgTitle"+al).click(H)}G("#showImgTitle").click(H)}function H(){var am="image";var al=G(this).attr("id");am+=al.replace("showImgTitle","");G("#"+am).click()}var g="";G("#showImgTitle_y").click(function(){G("#authyingyezhizhhm_back").blur();G("#authyingyezhizhhm_back").val("");G("#id_clearauthyingyezhizhhm_back").hide();G("#authyingyezhizhhm_back").on("input",function(){var am=G(this).val();if(g.length<am.length&&am.replace(g,"").length>1){G(this).val(g)}G("#authyingyezhizhhm_back").val(G("#authyingyezhizhhm_back").val().replace(/[^a-zA-Z0-9]+/,""));g=G("#authyingyezhizhhm_back").val();var al=G(this).val();if(al.length>0){G("#id_clearauthyingyezhizhhm_back").show();G("#id_clearauthyingyezhizhhm_back").click(function(){G("#authyingyezhizhhm_back").val("");G("#id_clearauthyingyezhizhhm_back").hide()})}else{G("#id_clearauthyingyezhizhhm_back").hide()}});P.toNextPage("yingYeNoPicDiv")});G("#autoNextTwoButton_back").click(function(){var al=G("#authyingyezhizhhm_back").val();if(al.length<11){Toast.makeText("请输入11位至18位的营业执照编号！",LENGTHLONG)}else{G("#authyingyezhizhhm").val(al);G("#y_okImg").show();G("#y_noneImg").hide();P.back()}});G("#ygrz_next_Btn").on("click",function(){var al=G("#authemail").attr("hide_date");var an=G("#authIdNo").attr("hide_date");var am=G("#authIdNo").val();if((/\*/g).test(am)){am=L}if(!P.notEmptyVail("authapplyname","请填写申请人姓名")){return}else{if(!P.notEmptyVail("authIdNo","请填写身份证号码")){return}else{if(!P.notEmptyVail("authemail","请填写电子邮箱")){return}}}if(an==null||an==""||!!G("#authIdNo").val()){if(G("#authIdNo").val().indexOf("*")<0){if(!P.idCardVail("authIdNo")){verifyFocus("authIdNo");return}}}if(al==null||al==""||!!G("#authemail").val()){if(!P.emailVail("authemail")){verifyFocus("authemail");return}}G("#yuangongConfirm").click(function(){aa()});q(am)});G("#authorityNextStepBtn").on("click",function(){console.log("next click----------------------------------");var am=G("#authemail").attr("hide_date");var aq=G("#authIdNo").attr("hide_date");var an=G("#authdizhi").attr("hide_date");var al=G("#authshanghum").val();var ao=G("#authyingyezhizhhm").val();var ap=G("#authIdNo").val();if((/\*/g).test(ap)){ap=L}if(!P.notEmptyVail("ahthHangYeId","请选择您的行业")){return}else{if(!P.notEmptyVail("authshanghum",ERROR.authShangHuNameEmptyError)){return}}if(SHOPTYPE_Z=="01"){if(!P.notEmptyVail("authyingyezhizhhm","请输入您的营业执照号")){return}}if(t==null||t==""||t==undefined){Toast.makeText("请选择完整的地区！",LENGTHLONG);return}else{if(!P.notEmptyVail("authdizhi","请填写地址")){verifyFocus("authdizhi");return}else{if(!P.notEmptyVail("authapplyname",ERROR.authapplyNameEmptyError)){return}else{if(aq==null||aq==""||G("#authIdNo").val()!=""){if(G("#authIdNo").val().indexOf("*")<0){if(!P.idCardVail("authIdNo")){verifyFocus("authIdNo");return}}}}}}if(am==null||am==""||G("#authemail").val()!=""){if(!P.emailVail("authemail")){verifyFocus("authemail");return}}if((/[`~!#\$%\^\&\*\(\)_\+<>\?:"\{\},\.\\\/;'\[\]]/g).test(G("#merchantName").val())){Toast.makeText("商铺名称/商户名称不能包含特殊字符!",LENGTHLONG);return}else{if((/[`~!#\$%\^\&\*\(\)_\+<>\?:"\{\},\.\\\/;'\[\]]/g).test(G("#applicantName").val())){Toast.makeText("经营者/代理人不能包含特殊字符!",LENGTHLONG);return}else{if((/[`~!#\$%\^\&\*\(\)_\+<>\?:"\{\},\.\\\/;'\[\]]/g).test(G("#authdizhi").val())){Toast.makeText("商铺地址/企业地址不能包含特殊字符!",LENGTHLONG);return}}}y(al,ao,ap)});function y(am,ao,ap){P.showDialog("请稍等..");var aq={staffCode:aj,channelCode:"20",custCode:E,merId:z,tmnNum:"440106014113",keep:P.getKeep(),bisChannel:bisChannel,checkType:"prtnName",checkValue:am};P.getDeviceInfo(aq);var al=Security.getSign(aq);aq.sign=al;aq.signVer="2";console.log("MAut005 入参："+JSON.stringify((aq)));var an=function(at){console.log("MAut005 出参： Result --> "+JSON.stringify(at));P.dismissDialog();if(at.code==TOKENLOST){var ar=function(){User.login(f)};P.alert("⊙_⊙,为了您的账户安全，请您重新登录。",ar);return}else{if(at.code!="000000"){P.alert(at.content);return}}if(SHOPTYPE_Z=="01"){ag(ao,ap)}else{q(ap)}};P.sendPostRequest(URL+Method.MAut005,aq,an,null)}function ag(an,ao){P.showDialog("请稍等..");var ap={staffCode:aj,channelCode:"20",custCode:E,merId:z,tmnNum:"440106014113",keep:P.getKeep(),bisChannel:bisChannel,checkType:"licence",checkValue:an};P.getDeviceInfo(ap);var al=Security.getSign(ap);ap.sign=al;ap.signVer="2";console.log("MAut005 入参："+JSON.stringify((ap)));var am=function(ar){console.log("MAut005 出参： Result --> "+JSON.stringify(ar));P.dismissDialog();if(ar.code==TOKENLOST){var aq=function(){User.login(f)};P.alert("⊙_⊙,为了您的账户安全，请您重新登录。",aq);return}else{if(ar.code!="000000"){P.alert(ar.content);return}}q(ao)};P.sendPostRequest(URL+Method.MAut005,ap,am,null)}function q(an){P.showDialog("请稍等..");var ao={staffCode:aj,channelCode:"20",custCode:E,merId:z,tmnNum:"440106014113",keep:P.getKeep(),bisChannel:bisChannel,checkType:"appCertNo",checkValue:an};P.getDeviceInfo(ao);var al=Security.getSign(ao);ao.sign=al;ao.signVer="2";console.log("MAut005 入参："+JSON.stringify((ao)));var am=function(aq){console.log("MAut005 出参： Result --> "+JSON.stringify(aq));P.dismissDialog();if(aq.code==TOKENLOST){var ap=function(){User.login(f)};P.alert("⊙_⊙,为了您的账户安全，请您重新登录。",ap);return}else{if(aq.code!="000000"){P.alert(aq.content);return}}P.toNextPage("nextAuthorityPage")};P.sendPostRequest(URL+Method.MAut005,ao,am,null)}G("#autoNextThreeButton").click(function(){if(P.conditionNotEmptyVail("imageLogId","请上传您的营业执照副本")&&P.conditionNotEmptyVail("image3LogId","请上传您的组织机构代码证照片")&&P.conditionNotEmptyVail("image4LogId","请上传您的税务登记证照片")){P.toNextPage("nextQiYeAuthorityPage")}});G("#qiyeRenZhengConfirm").click(function(){X()});G("#authareasShow").click(function(){ab="authareas";s("authprovice","getProvinceData","provice",null,true)});var t;var F={};function s(an,ap,ar,aq,al){var am="";console.log(al);if(!al){G("#"+an).html(am);G("#authdistrict").html(am)}console.log("-----"+ap+"-----");if(aq!=null){console.log("地区入参 --> "+JSON.stringify(aq))}var at=DB_Data.getActionCode(ap,JSON.stringify(aq));console.log("地区出参 --> "+JSON.stringify(at));for(var ao=0;ao<at.length;ao++){am+="<div style = 'padding: 2px 0px 2px 0px;text-align:center;width:100%;border-bottom:1px solid #e4d9d9 ; margin:0px;' class='proviceCity "+ar+"'>"+at[ao].name+"<span style='display:none;'>"+at[ao].code+"</span></div>"}G("#"+an).html(am);G("."+ar).click(function(){if(an!="authdistrict"){s(an=="authcity"?"authdistrict":"authcity",ap=="getCityData()"?"getDistrictData":"getCityData()",ar=="city"?"district":"city",{code:G(this).children("span").text()},false)}var au=G(this).text().replace(G(this).children("span").text(),"");if(an=="authprovice"){F.proviceName=au;document.title=au;App.setTitle(au)}else{if(an=="authcity"){F.cityName=au;document.title=F.proviceName+au;App.setTitle(F.proviceName+au)}else{F.districtName=au;document.title=F.proviceName+F.cityName+au;App.setTitle(F.proviceName+F.cityName+au)}}if(an=="authdistrict"){o=G(this).children("span").text()}console.log("areaNo===================================="+t);G(this).css({background:"#0A3350",color:"#FFF"});G(this).siblings().css({background:"#ECECEC",color:"#000"});console.log("地区选择"+t+"  || "+F.proviceName+"-"+F.cityName+"-"+F.districtName)});if(an=="authprovice"){P.toNextPage("authselectdizPage");G("#authcity").html("");G("#authdistrict").html("")}}var ab;G("#confirmCity").click(function(){console.log("areaNo1===================================="+t);if(!o){Toast.makeText("请选择完整的地区！",LENGTHLONG);return}t=o;console.log("areaNo2===================================="+t);G("#"+ab).val(F.proviceName+"-"+F.cityName+"-"+F.districtName);P.back()});G("#authshanghumShow").off("click");G("#authshanghumShow").on("click",function(){G("#merchantName").val("");G("#id_clearmerchantName").hide();P.toNextPage("merchantNamePage")});function A(){G("#applicantName").val("");G("#id_clearapplicantName").hide();if(SHOPTYPE_Z=="01"){P.toNextPage("applicantNamePage")}}G("#confirmMerchantName").click(function(){P.notEmptyVail("authshanghum",ERROR.authShangHuNameEmptyError,"merchantName");var am=document.getElementById("authshanghum").scrollWidth;var al=document.getElementById("authshanghum").clientWidth;if(am>al){G("#id_showauthshanghum").show()}else{G("#id_showauthshanghum").hide()}});G("#confirmApplicantName").click(function(){P.notEmptyVail("authapplyname",ERROR.authapplyNameEmptyError,"applicantName");var am=document.getElementById("authapplyname").scrollWidth;var al=document.getElementById("authapplyname").clientWidth;if(am>al){G("#id_authapplyname").show()}else{G("#id_authapplyname").hide()}});function O(al){if(al=="0"){console.log(" 个体------------------ ");G("#geRen").show();G("#qiYe").hide();G("#yuangong").hide();G("#autoNextTwoButton").show();G("#qiyeRenZhengConfirm").hide();G("#yuangongConfirm").hide()}else{if(al=="1"){console.log(" 企业------------------ ");G("#geRen").hide();G("#qiYe").show();G("#yuangong").hide();G("#autoNextTwoButton").hide();G("#qiyeRenZhengConfirm").show();G("#yuangongConfirm").hide()}else{if(al=="2"){console.log(" 员工------------------ ");G("#geRen").hide();G("#qiYe").hide();G("#yuangong").show();G("#autoNextTwoButton").hide();G("#qiyeRenZhengConfirm").hide();G("#yuangongConfirm").show()}}}}G("#showSelectProfession").click(function(){var an=G("#ahthHangYe").val();var al=G("#professionItems").children("[class=authBorder]");for(var am=0;am<al.length;am++){G(G(al[am]).children().children("img")).attr("src","images/btn_radio_off_pressed.png");if(G(al[am]).text().trim()==an){G(G(al[am]).children().children("img")).attr("src","images/btn_radio_on.png")}}P.toNextPage("auth_profession")});G("#showShoptype").click(function(){var al=G("#shoptype").val();var an=G("#haveLicenseItems").children("[class=authBorder]");for(var am=0;am<an.length;am++){G(G(an[am]).children().children("img")).attr("src","images/btn_radio_off_pressed.png");if(G(an[am]).text().trim()==al){G(G(an[am]).children().children("img")).attr("src","images/btn_radio_on.png")}}P.toNextPage("haveLicense")});G("#set321").on("click",is3to1.showAlertBox);G("#alert_3to1_yes").on("click",function(){is3to1.is321();is3to1.hideAlertBox();if(!a){J=true}});G("#alert_3to1_no").on("click",function(){is3to1.not321();is3to1.hideAlertBox();if(!a){J=false}});function Q(){console.log("个人认证开头＝＝＝＝＝");if(SHOPTYPE_Z=="02"){if(!P.conditionNotEmptyVail("image14LogId","请上传商铺照片")){return}}else{if(SHOPTYPE_Z=="01"){if(!P.conditionNotEmptyVail("image11LogId","请上传营业执照")){return}}}if(!P.conditionNotEmptyVail("image1LogId","请上传经营者手持身份证正面")){return}else{if(!P.conditionNotEmptyVail("image13LogId","请上传经营者身份证正面")){return}else{if(!P.conditionNotEmptyVail("image2LogId","请输入经营者身份证反面")){return}else{console.log("个人认证开头222＝＝＝＝＝");if(T==1&&e==0){console.log("ornotagreement=="+T+"==agreement=="+e);Toast.makeText("请同意勾选协议",null);return}console.log("个人认证开头＝＝＝＝＝333");var an=G("#authshanghum").val();var aw=G("#authIdNo").val();var ao=G("#authapplyname").val();var at=t;var al=G("#ahthHangYeId").val();if(SHOPTYPE_Z=="01"){licence=G("#authyingyezhizhhm").val()}else{if(SHOPTYPE_Z=="02"){licence="000000000000000"}}console.log("licence====================="+licence);var ar;if(SHOPTYPE_Z=="01"){ar=G("#image11LogId").text()}else{if(SHOPTYPE_Z=="02"){ar=G("#image14LogId").text()}}var av=G("#authdizhi").val();var au=G("#authemail").val();if(au==""){au=G("#authemail").attr("hide_date")}if(aw==""){aw=G("#authIdNo").attr("hide_date")}if(av==""){av=G("#authdizhi").attr("hide_date")}console.log("licenceId ================="+ar);var ax=G("#image13LogId").text();var ap=G("#image2LogId").text();var am=G("#image1LogId").text();console.log("个人认证开头＝＝＝＝＝4444");var aq={regType:"PRT1001",prtnName:an,applyer:ao,appCertNo:aw,appCertNoId:ax,appCertNoRvId:ap,areaCode:at,trade:al,licence:licence,licenceId:ar,address:av,email:au,orgCode:"",orgCodeId:"",reveNbr:"",revenbrId:"",legal:"",legalCertNo:"",legalCertNoId:"",legalCertNoRvId:"",appCertNoHandId:am,openFlag:e,authType:"",agentCode:""};r(aq)}}}}function X(){if(J){if(!P.conditionNotEmptyVail("image12LogId","请上传三证合一")){return}}else{if(!P.conditionNotEmptyVail("imageLogId","请上传营业执照")){return}else{if(!P.conditionNotEmptyVail("image3LogId","请上传组织机构代码证")){return}else{if(!P.conditionNotEmptyVail("image4LogId","请上传税务登记证")){return}}}}if(P.conditionNotEmptyVail("image5LogId","请上传法人身份证正面")&&P.conditionNotEmptyVail("image6LogId","请上传法人身份证反面")&&P.conditionNotEmptyVail("image10LogId","请上传代理人身份证正面")&&P.conditionNotEmptyVail("image8LogId","请上传代理人身份证反面")&&P.conditionNotEmptyVail("image7LogId","请上传代理人手持身份证正面")){var aD=G("#authshanghum").val();var al=G("#authIdNo").val();var av=G("#authapplyname").val();var am=t;var ao=G("#ahthHangYeId").val();var aB=G("#authyingyezhizhhm").val();var aq=G("#authdizhi").val();var aw=G("#authemail").val();var au=G("#imageLogId").text();var ax=G("#image3LogId").text();var ar=G("#image4LogId").text();var ay=G("#image5LogId").text();var at=G("#image6LogId").text();var ap=G("#image10LogId").text();var aC=G("#image8LogId").text();var an=G("#image7LogId").text();var az="";if(aw==""){aw=G("#authemail").attr("hide_date")}if(al==""){al=G("#authIdNo").attr("hide_date")}if(aq==""){aq=G("#authdizhi").attr("hide_date")}var aA={regType:"PRT1002",prtnName:aD,applyer:av,appCertNo:al,appCertNoId:ap,appCertNoRvId:aC,areaCode:am,trade:ao,licence:aB,licenceId:au,address:aq,email:aw,orgCode:"",orgCodeId:ax,reveNbr:"",revenbrId:ar,legal:"",legalCertNo:az,legalCertNoId:ay,legalCertNoRvId:at,appCertNoHandId:an,openFlag:"",authType:"",agentCode:""};r(aA)}}function aa(){if(!P.conditionNotEmptyVail("image15LogId","请上传工作证明")){return}else{if(!P.conditionNotEmptyVail("image16LogId","请上传手持身份证正面")){return}else{if(!P.conditionNotEmptyVail("image17LogId","请上传身份证正面")){return}else{if(!P.conditionNotEmptyVail("image18LogId","请上传身份证反面")){return}}}}var aq=G("#authapplyname").val();var ao=G("#authemail").val();var ar=G("#authIdNo").val();if(ao==""){ao=G("#authemail").attr("hide_date")}if(ar==""){ar=G("#authIdNo").attr("hide_date")}var ap=G("#image15LogId").text();var am=G("#image16LogId").text();var al=G("#image17LogId").text();var an=G("#image18LogId").text();var at={regType:"PRT1001",prtnName:"0",applyer:aq,appCertNo:ar,appCertNoId:al,appCertNoRvId:an,areaCode:"0",trade:"0",licence:"",licenceId:ap,address:"0",email:ao,orgCode:"",orgCodeId:"",reveNbr:"",revenbrId:"",legal:"",legalCertNo:"",legalCertNoId:"",legalCertNoRvId:"",appCertNoHandId:am,openFlag:e,authType:"01",agentCode:S};console.log("员工认证出参== "+JSON.stringify(at));r(at)}function r(an){an.custCode=E;an.staffCode=aj;an.channelCode="20";an.bisChannel=bisChannel;an.clientVersion=deviceInfo.clientVersion;an.softwareType=deviceInfo.systemType;an.merId=z;an.tmnNum="440106003094";an.keep=P.getKeep();an.shopType=SHOPTYPE_Z;an.threeInOne=J?1:0;an.authChannel="A01";an.appCertNoEffSD=l;an.appCertNoEffED=ae;an.legalCertNoEffSD=B;an.legalCertNoEffED=h;an.legalAddress=k;P.getDeviceInfo(an);var al=Security.getSign(an);an.sign=al;an.signVer="2";console.log("info:Method:MAut101 入参 -->"+JSON.stringify(an));P.showDialog("信息提交中，请稍等..");var am=function(ap){console.log("info:Method:MAut101  出参： Result --> "+JSON.stringify(ap));P.dismissDialog();if(ap.code==TOKENLOST){var ao=function(){User.login(f)};P.alert("亲,为了您的账户安全，请您重新登录。",ao);return}else{if(ap.code!="000000"){if(ap.code=="011053"){return}else{P.alert("亲,提交失败，"+ap.content)}return}else{P.alert("提交成功，工作人员将在1个工作日内完成认证，请静候",function(){App.exitApp()});return}}};P.sendPostRequest(URL+Method.MAut101,an,am)}function c(){P.showDialog("正在查询你的信息，请稍等..");var an={staffCode:aj,channelCode:"20",custCode:E,merId:z,tmnNum:"440106014113",bisChannel:bisChannel,keep:P.getKeep()};P.getDeviceInfo(an);var am=Security.getSign(an);an.sign=am;an.signVer="2";console.log("SAut102   入参："+JSON.stringify(an));var al=function(aQ){console.log("merchantType==="+af);console.log("SAut102   出参："+JSON.stringify(aQ));P.dismissDialog();if(aQ.code=="000000"){var aM=aQ.regType;var aT=aQ.prtnName;var aC=aQ.applyer;var ao=aQ.appCertNo;var at=aQ.appCertNoId;var aS=aQ.appCertNoRvId;var ap=aQ.appCertNoHandId;var aq=aQ.trade;var aK=aQ.tradeName;var aR=aQ.licence;var aB=aQ.licenceId;var au=aQ.address;var aF=aQ.email;var aE=aQ.orgCode;var aH=aQ.orgCodeId;var aA=aQ.reveNbr;var av=aQ.revenbrId;var ax=aQ.legal;var aL=aQ.legalCertNo;var aJ=aQ.legalCertNoId;var aw=aQ.legalCertNoRvId;var aD=aQ.noAuth;I=aQ.authStat;var az=aQ.authStat;var aP=aQ.agentCode;aT=aQ.prtnName;Z=aQ.authChannel;M=aQ.authApplyer;L=aQ.authAppCertNo;l=aQ.appCertNoEffSD;ae=aQ.appCertNoEffED;p=aQ.authLegal;C=aQ.authLegalCertNo;B=aQ.legalCertNoEffSD;h=aQ.legalCertNoEffED;k=aQ.legalAddress;if(aQ.code==TOKENLOST){var aG=function(){User.login(f)};P.alert("⊙_⊙,为了您的账户安全，请您重新登录。",aG);return}else{if(aQ.code!="000000"){P.alert("亲,获取您的基本信息失败，"+aQ.content);return}}console.log("bankMode==="+u);console.log("useInfoIOS.regType==="+useInfoIOS.regType);console.log("typeof regType==="+typeof useInfoIOS.regType);console.log("productType==="+i);console.log("hadEptinfo==="+ad);console.log("typeof hadEptinfo==="+typeof ad);if(useInfoIOS.regType!=="1"){if(i=="2"){if((u=="BT1001"||u=="BT1013")&&ad!="1"){G("#kaotong_agreement").show()}else{G("#kaotong_agreement").hide()}}else{G("#kaotong_agreement").hide()}}else{G("#kaotong_agreement").hide()}if(aQ.authStat=="A00"){var aG=function(){P.back()};P.alert("您的认证信息还在审核中，请耐心等候... ...",aG);return}else{if(aQ.authStat=="A01"){}else{if(aQ.authStat=="A02"||aQ.authStat=="A99"){console.log("已经认证了");console.log("merchantType==="+af);console.log("params.authStat=="+aQ.authStat);console.log("hadEptinfo==="+ad);if(aQ.authStat=="A02"&&ad=="1"){console.log("已经认证和开通添益宝了-------");G("#showapplicantname").unbind();G("#showapplicantname_bggray").addClass("gray_bg");G("#showapplicantname_bggray #authapplyname").addClass("gray_bg");G("#authIdNo").attr("readonly","true");G("#show_creditcard").addClass("gray_bg");G("#show_creditcard #authIdNo").addClass("gray_bg");G("[name = merchantTypeChoose]").unbind();console.log("已经认证和开通222222222添益宝了-------")}}else{if(aQ.authStat=="A03"){var aG=function(){P.back()};P.alert("您已经认证...",aG);return}}}}G("#authshanghum").val(aT);console.log("merchantType= "+af);console.log("merchantType= "+typeof af);if(af==="0"||af==="1"){console.log("setpe111111111111111111111111111111111");console.log("merchantType= "+af);P.dismissDialog();console.log("Utils.pageIds111111111111==="+JSON.stringify(P.pageIds));P.toNextPage("authorityPage");if(aQ.authStat=="A02"&&ad=="1"){P.pageIds.shift()}}else{if(af==="2"){console.log("merchantType ========================== "+af);console.log("prtnName ======================== "+aT);if(!aP){P.toNextPage("company_code");P.dismissDialog();if(V.worker_recetification==="worker"){P.pageIds.shift()}}else{console.log("agentCode====================="+aP);S=aP;W()}}}if(aT!=""){G("#noneImg_hum").hide();G("#okImg_hum").show()}G("#authapplyname").val(aC);if(aC!=""){G("#noneImg_name").hide();G("#okImg_name").show()}G("#authIdNo").attr("hide_date",ao);G("#authIdNo").val(ao);t=aQ.areaCode;var ar={code:t};var aO=DB_Data.getProCityDistric(t);G("#authareas").val(aO.ProvinceName+"-"+aO.CityName+"-"+aO.CountyName);if(au!=""&&au!=null&&au!="null"){G("#authdizhi").attr("hide_date",au).val(au)}if(aF!=""&&aF!=null&&aF!="null"){G("#authemail").attr("hide_date",aF).val(aF)}G("#ahthHangYe").val(G("#"+aq).text());G("#ahthHangYeId").val(aq);if(aR=="000000000000000"){G("#licenceNomber").hide();SHOPTYPE_Z="02";G("#shoptype").val("无营业执照");G("#licencePIC").hide();G("#shopPIC").show()}else{G("#authyingyezhizhhm").val(aR)}if(az=="A01"){P.dismissDialog();return}console.log("licenceId=================="+aB);console.log("appCertNoId=================="+at);if(aB!=""){G("#image11LogId").text(aB);ay("11")}if(at!=""){G("#image13LogId").text(at);ay("13")}if(ap!=""){G("#image1LogId").text(ap);ay("1")}if(aS!=""){G("#image2LogId").text(aS);ay("2")}if(ap!=""){G("#image7LogId").text(ap);ay("7")}if(aS!=""){G("#image8LogId").text(aS);ay("8")}if(at!=""){G("#image10LogId").text(at);ay("10")}if(aM=="PRT1001"){}else{if(aM=="PRT1002"){if(aB!=""){G("#imageLogId").text(aB);G("#okImg").show();G("#noneImg").hide()}if(aH!=""){G("#image3LogId").text(aH);ay("3")}if(av!=""){G("#image4LogId").text(av);ay("4")}if(aJ!=""){G("#image5LogId").text(aJ);ay("5")}if(aw!=""){G("#image6LogId").text(aw);ay("6")}}}function ay(aU){G("#okImg"+aU).show();G("#noneImg"+aU).hide()}function aI(aU){console.log("------------"+aU);if(aU!="企业商户"){G("#oneMerchantTypeDiv div:first").click()}else{G("#authorityNextStepBtn").click()}}function aN(aU,aV){console.log("显示图片！！");var aW={LOGID:G("#"+aU+"LogId").text(),TYPE:aV};console.log("   入参："+JSON.stringify(aW));Scanner.handlerVerifyPhoto(aW,function(aY){var aX=JSON.stringify(aY);aX=aX.substring(1,aX.length-1);G("#"+aU+"LogId").text(aX)},function(){Toast.makeText("取消上传！",LENGTHLONG)})}}else{}};P.sendPostRequest(URL+Method.SAut102,an,al)}function b(){var al={bisChannel:bisChannel,channelCode:"20",clientVersion:deviceInfo.clientVersion,imei:"",imsi:"",keep:P.getKeep(),merId:z,model:"MRdc001",signVer:"2",softwareType:"8.1",tmnNum:"440106003094",vender:"Android"};var am=function(an){alert(JSON.stringify(JSON.stringify(an)));P.dismissMDialog("ch_dialog")};P.sendPostRequest(URL+Method.MRdcMake,al,am,null,"ch_alert","chalertmsg","chAlertBtn","ch_dialog")}});function selectProfession(b,a){$("#ahthHangYeId").val(b);$("#ahthHangYe").val(a);Utils.back()}function selectShoptype(b,a){console.log("id=----------------------"+b);if(b==="02"){$("#licenceNomber").hide();$("#licencePIC").hide();$("#shopPIC").show();$("#merchantNameInfo_img").show();$("#merchantNameInfo").show();$("#merchantNameInfo2_img").hide();$("#merchantNameInfo2").hide();SHOPTYPE_Z="02";console.log("SHOPTYPE_Z----------------------"+SHOPTYPE_Z)}else{if(b==="01"){$("#licenceNomber").show();$("#licencePIC").show();$("#shopPIC").hide();$("#merchantNameInfo_img").hide();$("#merchantNameInfo").hide();$("#merchantNameInfo2_img").show();$("#merchantNameInfo2").show();SHOPTYPE_Z="01";console.log("SHOPTYPE_Z++++++++------------------"+SHOPTYPE_Z)}}$("#shoptypeId").val(b);$("#shoptype").val(a);Utils.back()}function verifyFocus(a){$("#"+a).focus()}var is3to1={alertBoxID:$("#alert_3to1"),Item_is321_ID:$("#ture_321"),Item_not321_ID:$("#false_321"),field:$("#set321_val"),showAlertBox:function(){$("#alert_3to1").show();show321=true},hideAlertBox:function(){this.alertBoxID.hide();show321=false},is321:function(){this.Item_is321_ID.show();this.Item_not321_ID.hide();this.field.text("是")},not321:function(){this.Item_is321_ID.hide();this.Item_not321_ID.show();this.field.text("否")}};