define(function(){var y;var A={keyStr:"",keyInputId:"",initPwdId:function(E,D,C){A.keyStr="";A.keyInputId=E;A.maxLength=C;A.inputCallback=D;$("#"+E).blur(function(){A.hideKeyboard()})},initPwdUI3:function(C){A.inputCallback=C},popPswKeyboard:function(){console.log("----------------------------popPswKeyboard:");return s("PasswordKeyBoard","popPswKeyboard",null)},hideKeyboard:function(){return s("PasswordKeyBoard","hideKeyboard",null)},popKeyboardUI3:function(){return s("PasswordKeyBoard","showPwd",null)},hideKeyboardUI3:function(){if(!!config.payingBack){config.payingBack=false}return s("PasswordKeyBoard","hidPwd",null)},pswInputStr:function(C){var E="";for(var D=0;D<A.keyStr.length;D++){if(D==A.keyStr.length-1&&C){clearTimeout(y);E+=A.keyStr.charAt(D);$("#"+A.keyInputId).val(E);y=setTimeout(function(){E=E.substring(0,E.length-1);E+="●";$("#"+A.keyInputId).val(E)},500)}else{E+="●"}}$("#"+A.keyInputId).val(E);A.inputCallback(A.keyStr)},returnkey:function m(C){if(A.maxLength!=null&&A.keyStr.length>=A.maxLength){return}A.inputCallback(C)},deleteKey:function l(){A.keyStr=A.keyStr.substr(0,A.keyStr.length-1);A.pswInputStr(false)}};var d={keyNum:"",keyInputId:"",initPwdId:function(H,G,D,C,E,F){d.keyInputId=H;$("#"+d.keyInputId).attr("readonly","readonly");d.keyNum=$("#"+d.keyInputId).val();d.inputCallback=G;d.backspaceCallback=D;d.maxLength=C;d.isDefault=F;d.closeDot=E},InitnumKeyboard:function(){s("NumberKeyBoard","InitnumKeyboard",null);$("#"+d.keyInputId).focus()},HidenumKeyboard:function(){return s("NumberKeyBoard","HidenumKeyboard",null)},DefaultInputStr:function(C){if(d.isDefault==null||d.isDefault==""||d.isDefault==true){$("#"+d.keyInputId).val(C)}},returnNum:function b(C){console.log("returnNum:"+C);d.keyNum+=(""+C);d.DefaultInputStr(d.keyNum);if(d.inputCallback!=null&&d.inputCallback!=""){d.inputCallback(d.keyNum,C)}console.log("len=="+$("#"+d.keyInputId).val().length);if(!!d.maxLength){d.keyNum=d.keyNum.substr(0,d.maxLength)}if(!!d.closeDot){d.keyNum=d.keyNum.replace(/\./g,"")}},deleteNum:function u(C){console.log("deleteNum:");d.keyNum=d.keyNum.substr(0,d.keyNum.length-1);d.DefaultInputStr(d.keyNum);if(!!d.maxLength){d.keyNum=d.keyNum.substr(0,d.maxLength)}if(d.backspaceCallback!=null&&d.backspaceCallback!=""){d.backspaceCallback(d.keyNum,C)}}};var z={pay:function(E,F,C){var D={params:E};return e("Payment","pay",JSON.stringify(D),F,C)},recharge:function(F,D,G,C){var E={productNo:F,location:D};return e("Payment","recharge",JSON.stringify(E),G,C)}};var x={scan:function(E,F,C){var D={params:E};return e("Scanner","scan",JSON.stringify(D),F,C)},handlerVerifyPhoto:function(D,E,C){return e("Scanner","handlerVerifyPhoto",JSON.stringify(D),E,C)},handlerPreviewPhoto:function(D,E,C){return s("Scanner","handlerPreviewPhoto",JSON.stringify(D),E,C)},getBarCode:function(D,C){return e("Scanner","oalWaterScan",JSON.stringify({}),D,C)}};var i={getProduct:function(){return s("User","getProduct",null)},getLocation:function(){return s("User","getLocation",null)},getSuccessLoginInfo:function(){return s("User","getSuccessLoginInfo",null)},login:function(C){return s("User","login",null)}};var v={exitCompleteApp:function(){s("App","exitCompleteApp",null)},setThresholdBtnIsVisable:function(C){var D={isvisable:C};console.log("app--------------->"+JSON.stringify(D));s("App","setThresholdBtnIsVisable",JSON.stringify(D))},jumpToRecertify:function(){var C={comefrom:"tianyibao"};e("App","jumpToRecertify",JSON.stringify(C))},jumpToBindCard:function(C){var D={comefrom:"tianyibao"};e("App","jumpToBindCard",JSON.stringify(D),C)},jumpToUnBindCard:function(){var C={comefrom:"tianyibao"};e("App","jumpToUnBindCard",JSON.stringify(C))},getAppId:function(){return s("App","getAppId",null)},jumpToNewH5View:function(C,E){var D={url:C};e("App","jumpToNewH5View",JSON.stringify(D),null,E)},jumpToNewTianyibao:function(){var C={};s("App","jumpToNewTianyibao",JSON.stringify(C))},updateTybRereshFlag:function(){var C={tybRefreshFlag:"1"};s("App","updateTybRereshFlag",JSON.stringify(C))},setFinishIcon:function(){var C={};s("App","setFinishIcon",JSON.stringify(C))},jumpToCustomerService:function(){var C={};s("App","jumpToCustomerService",JSON.stringify(C))},setpopWindwonGone:function(){var C={};s("App","setpopWindwonGone",JSON.stringify(C))},setpopWindwonVisible:function(){var C={};s("App","setpopWindwonVisible",JSON.stringify(C))},autoLogin:function(D){var C={productNo:"",location:""};e("App","autoLogin",JSON.stringify(C),D)},getSessionKey:function(){return s("App","getSessionKey",null)},getVersion:function(){return s("App","getVersion",null)},getHome:function(){return s("App","getHome",null)},getSecurityKey:function(){return s("App","getSecurityKey",null)},overrideBackPressed:function(D){var C={bound:D};return s("App","overrideBackPressed",JSON.stringify(C))},exitApp:function(){return s("App","exitApp",null)},setKeyEventListener:function(C){v.listener=C},onKeyEvent:function(C){if(typeof v.listener=="function"){v.listener(C)}},setTitle:function(D){var C={title:D};s("App","setTitle",JSON.stringify(C))},setTitleBackgroundColor:function(C){var D={color:C};s("App","setTitleBackground",JSON.stringify(D))},setTitleBackgroundPath:function(D){var C={path:D};s("App","setTitleBackground",JSON.stringify(C))},updateUserInfo:function(D){var C={bindCard:D};return s("App","updateUserInfo",JSON.stringify(C))},getScreen:function(){return s("App","getScreen",null)},showRightButton:function(C,E){var D={caption:C,callback:E};s("App","showRightButton",JSON.stringify(D))},hideRightButton:function(){s("App","hideRightButton","{}")},jumpToRealnameVerify:function(){s("App","jumpToRealnameVerify","{}")},jumpToAccountRecharge:function(E,C,F){var D={productNo:E,location:C};e("App","jumpToAccountRecharge",JSON.stringify(D),F)},execWhenReturnAndAppear:function(D){var C={execWhenReturnAndAppearJSFunc:D};e("App","execWhenReturnAndAppear",C)},jumpToNativeView:function(F,D,G,C){if(typeof D=="undefined"){D={}}var E=D;E.viewName=F;e("App","jumpToNativeView",JSON.stringify(E),G,C)},getDeviceInfo:function(){return s("App","getDeviceInfo",null)},queryBalance:function(){s("App","queryBalance","{}")},updateTybOpenStat:function(C){s("App","updateTybOpenStat",C)},jumpToMain:function(){console.log("---- js bridge jump to main");s("App","jumpToMain","{}")},goBalanQuery:function(){var C={};return s("App","goBalanQuery",JSON.stringify(C))}};var c={base64Encode:function(C){if(typeof(C)=="undefined"||typeof(C)!="object"){return false}else{var E={};var D="";D=s("UtilPlugin","base64Encode",JSON.stringify(C));E=JSON.parse(D);return E}},base64Decode:function(C){if(typeof(C)=="undefined"||typeof(C)!="object"){return false}else{var E={};var D="";D=s("UtilPlugin","base64Decode",JSON.stringify(C));E=JSON.parse(D);return E}}};var q={put:function(E,F,D){console.log("put-key:"+E+" value:"+F+" prefname:"+D);var C={key:E,value:F,prefname:D};s("Preference","put",JSON.stringify(C))},get:function(E,F,D){console.log("get-key:"+E+" defValue:"+F+" prefname:"+D);var C={key:E,defValue:F,prefname:D};return s("Preference","get",JSON.stringify(C))},putWithApp:function(D,E,C){this.put(D,E,C)},getWithApp:function(D,E,C){return this.get(D,E,C)}};var B={execSQL:function(E,G,F){var D={dbName:E,sql:G,params:F};var C=s("Storage","exeSQL",JSON.stringify(D));return C},createDatabase:function(G,F,E,C){var D={dbName:G,createSQL:F,upgradSQL:E,version:C};return s("Storage","createDatabase",JSON.stringify(D))},batchInsert:function(C,F,E,G){var D={dbName:C,tableName:F,columns:E,data:G};return s("Storage","batchInsert",JSON.stringify(D))}};var k={getCardList:function(){return JSON.parse(s("CardList","queryAll",null))},getProCityDistric:function(D){var C={code:D};return JSON.parse(s("AreaManagerPlugin","getProCityDistricName",JSON.stringify(C)))},getActionCode:function(D,C){var E=null;if(C!=null){E=C}return JSON.parse(s("AreaManagerPlugin",D,E))},getTrafficProvinces:function(){var C=null;return JSON.parse(s("TrafficAreaList","getTrafficProvinces",C))},getTrafficCitiesByProvinceId:function(C){var D={code:C};return JSON.parse(s("TrafficAreaList","getTrafficCitiesByProvinceId",JSON.stringify(D)))}};var g={SERVICE:"File",copy:function(E,F){var D={path:E,newpath:F};var C=JSON.stringify(D);return s(g.SERVICE,"copy",C)},exists:function(E){var D={file_path:E};var C=JSON.stringify(D);return s(g.SERVICE,"exists",C)},remove:function(D){var C={path:D};return s(g.SERVICE,"remove",JSON.stringify(C))}};var r={};var j={showSingleChoiceDialog:function(G,F,E,D,H){var C={title:G,list:F,checkedItem:E,displayKey:D};return e("Dialog","showSingleChoiceDialog",JSON.stringify(C),H,null)},showSwitchDialog:function(G,F,E,C,H){var D={title:G,message:F,postext:E,negtext:C};return e("Dialog","showSwitchDialog",JSON.stringify(D),H,null)},showWaitDialog:function(E,D){var C={title:E,msg:D};return s("Dialog","showWaitDialog",JSON.stringify(C))},dismissDialog:function(D){var C={id:D};return s("Dialog","dismissDialog",JSON.stringify(C))},showProgressDialog:function(E,D){var C={title:E,msg:D};return s("Dialog","showProgressDialog",JSON.stringify(C))},showDateChoiceDialog:function(C,E){var D={date:C};return e("Dialog","showDateChoiceDialog",JSON.stringify(D),E,null)},jumpToAuthorityDialog:function(){return s("Dialog","jumpToAuthorityDialog",null)},alert:function(C){window.alert(C)},showAlertDialog:function(G,F,D,E,H){dismissDialog();var C={title:G,code:E,btn:D};C.content=F;if(F==null||F=="null"||F==""){C.content="未知错误"}e("Dialog","showAlertDialog",JSON.stringify(C),H)},showAlertTwoBtnDialog:function(H,F,D,G,E,I){dismissDialog();var C={title:H,code:E,content:F,okBtn:D,cancelBtn:G};e("Dialog","showAlertTwoBtnDialog",JSON.stringify(C),I)},showAlertSynchroDialog:function(G,E,D,F,H){dismissDialog();var C={title:G,content:E,btn:D,TRADE_LIST_QUERY_TYPE:F,TRADE_LIST_QUERY_NUMBER:H};s("Dialog","showAlertSynchroDialog",JSON.stringify(C))},jumpToOrderQuery:function(G,E,D,F,H){dismissDialog();var C={title:G,content:E,btn:D,TRADE_LIST_QUERY_TYPE:F,TRADE_LIST_QUERY_NUMBER:H};s("App","jumpToOrderQuery",JSON.stringify(C))}};var t={LENGTH_LONG:1,LENGTH_SHORT:0,makeText:function(E,D){var C={text:E,duration:D};s("Toast","makeText",JSON.stringify(C))}};var f={openContacts:function(D,C){e("Contacts","openContacts","{}",D,C)},tel:function(C){var D={tel:C};return s("Contacts","call",JSON.stringify(D))}};var p={digest:function(C,E){var D={algorithm:C,source:E};return s("MessageDigest","digest",JSON.stringify(D))}};var h={getSign:function(C){return s("Security","getSign",JSON.stringify(C))},getSignINF:function(C){return s("Security","getSignINF",JSON.stringify(C))},encrypt:function(D){var C={source:D};return s("Security","encrypt",JSON.stringify(C))},decrypt:function(D){var C={encryptedData:D};return s("Security","decrypt",JSON.stringify(C))},pinkeyEncrypt:function(E,D){var C={source:E,salt:D};return s("Security","pinkeyEncrypt",JSON.stringify(C))},encryptPassword:function(E,F,D){var C={account:E,password:F,encrypRandNumber:D};return s("Security","encryptPassword",JSON.stringify(C))},verifyCodeEncrypt:function(D){var C={verifyCode:D};return s("App","verifyCodeEncrypt",JSON.stringify(C))},verifySign:function(C){var D={response:'"'+JSON.stringify(C)+'"'};return s("Security","verifySign",JSON.stringify(D))}};var n={onEventWithLabel:function(E,D){var C={eventId:E,eventLabel:D};return s("TalkingData","trackEventWithLabel",JSON.stringify(C))}};var w=function(C,G,F,E,H,D){if(E){return s(C,G,F)}else{s(C,G,F,H,D)}};var a={idCounter:0,INPUT_CMDS:"",INPUT_ARGS:"",OUTPUT_RESULTS:"",CALLBACK_SUCCESS:function(C){console.log(C);return},CALLBACK_FAIL:function(C){console.log(C);return},callNative:function(F,C){this.INPUT_CMDS=F;this.INPUT_ARGS=C;var D="ID_"+(++this.idCounter);window.nintf.setCmds(this.getInputCmd(),D);window.nintf.setArgs(this.getInputArgs(),D);var E=document.createElement("IFRAME");E.setAttribute("src","bestpayhtml://ready?id="+D);document.documentElement.appendChild(E);E.parentNode.removeChild(E);E=null;console.log(2);console.log("return this.OUTPUT_RESULTS:"+this.OUTPUT_RESULTS);return this.OUTPUT_RESULTS},getInputCmd:function(){return JSON.stringify(this.INPUT_CMDS)},getInputArgs:function(){return this.INPUT_ARGS},callBackJs:function(C){this.OUTPUT_RESULTS=C;console.log(1);var F=JSON.parse(C);var E=F.message;console.log("message:"+E);var D=F.status;if(D==0){if(typeof this.CALLBACK_SUCCESS!="undefined"){setTimeout("BestpayHtml5.CALLBACK_SUCCESS('"+E+"')",0)}}else{if(typeof this.CALLBACK_FAIL!="undefined"){setTimeout("BestpayHtml5.CALLBACK_FAIL('"+E+"')",0)}}console.log("你先:("+(a.idCounter)+")"+C)}};var s=function(F,D,H){var I={service:F,action:D};var C=prompt(JSON.stringify(I),H);var K;try{K=JSON.parse(C)}catch(G){console.error(G.message)}var E=K.status;var J=K.message;if(E==0){return J}else{console.error("service:"+F+" action:"+D+" error:"+J)}};var o;var e=function(D,H,F,I,E){var G={service:D,action:H};if(typeof E!="success"){a.CALLBACK_SUCCESS=I}if(typeof E!="undefined"){a.CALLBACK_FAIL=E}else{a.CALLBACK_FAIL=function(){}}var C=a.callNative(G,F);console.log("我先:("+(a.idCounter)+")"+C)};return{Dialog:j,App:v,exec_asyn:e,exec:s,TalkingData:n,Preference:q,Contacts:f,User:i,Toast:t,DB_Data:k,BestpayHtml5:a,Storage:B,Security:h,PasswordKeyBoard:A,NumberKeyBoard:d,Scanner:x}});