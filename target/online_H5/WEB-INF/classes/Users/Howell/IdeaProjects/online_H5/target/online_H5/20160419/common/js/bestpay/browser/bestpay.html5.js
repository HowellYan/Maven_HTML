define(function(){var w;var m={keyStr:"",keyInputId:"",initPwdId:function(y){m.keyStr="";m.keyInputId=y;$("#"+y).blur(function(){m.hideKeyboard()});$("#"+y).css("font-size","15px")},popPswKeyboard:function(){return r("PasswordKeyBoard","popPswKeyboard",null)},hideKeyboard:function(){return r("PasswordKeyBoard","hideKeyboard",null)},pswInputStr:function i(A){var z="";for(var y=0;y<m.keyStr.length;y++){if(y==m.keyStr.length-1&&A){clearTimeout(w);z+=m.keyStr.charAt(y);$("#"+m.keyInputId).val(z);w=setTimeout(function(){z=z.substring(0,z.length-1);z+="●";$("#"+m.keyInputId).val(z)},500)}else{z+="●"}}$("#"+m.keyInputId).val(z)},returnkey:function k(y){m.keyStr+=y;m.pswInputStr(true)},deleteKey:function j(){m.keyStr=m.keyStr.substr(0,m.keyStr.length-1);m.pswInputStr(false)}};var x={pay:function(z,A,B){var y={params:z};return c("Payment","pay",JSON.stringify(y),A,B)},recharge:function(A,C,y,B){var z={productNo:A,location:C};return c("Payment","recharge",JSON.stringify(z),y,B)}};var v={scan:function(z,A,B){var y={params:z};return c("Scanner","scan",JSON.stringify(y),A,B)},handlerVerifyPhoto:function(y,z,A){return c("Scanner","handlerVerifyPhoto",JSON.stringify(y),z,A)},handlerPreviewPhoto:function(y,z,A){return r("Scanner","handlerPreviewPhoto",JSON.stringify(y),z,A)}};var g={getProduct:function(){return r("User","getProduct",null)},getLocation:function(){return r("User","getLocation",null)},getSuccessLoginInfo:function(){return r("User","getSuccessLoginInfo",null)},login:function(y){return r("User","login",null)}};var t={setThresholdBtnIsVisable:function(y){var z={isvisable:y};console.log("app--------------->"+JSON.stringify(z));r("App","setThresholdBtnIsVisable",JSON.stringify(z))},jumpToRecertify:function(){var y={comefrom:"tianyibao"};c("App","jumpToRecertify",JSON.stringify(y))},jumpToBindCard:function(){var y={comefrom:"tianyibao"};c("App","jumpToBindCard",JSON.stringify(y))},jumpToUnBindCard:function(){var y={comefrom:"tianyibao"};c("App","jumpToUnBindCard",JSON.stringify(y))},getAppId:function(){return r("App","getAppId",null)},jumpToNewH5View:function(y){var z={url:y};c("App","jumpToNewH5View",JSON.stringify(z))},autoLogin:function(z){var y={productNo:"",location:""};c("App","autoLogin",JSON.stringify(y),z)},getSessionKey:function(){return r("App","getSessionKey",null)},getVersion:function(){return r("App","getVersion",null)},getHome:function(){return r("App","getHome",null)},getSecurityKey:function(){return r("App","getSecurityKey",null)},overrideBackPressed:function(y){},exitApp:function(){return r("App","exitApp",null)},setKeyEventListener:function(y){t.listener=y},onKeyEvent:function(y){if(typeof t.listener=="function"){t.listener(y)}},setTitle:function(z){var y={title:z};r("App","setTitle",JSON.stringify(y))},setTitleBackgroundColor:function(y){var z={color:y};r("App","setTitleBackground",JSON.stringify(z))},setTitleBackgroundPath:function(z){var y={path:z};r("App","setTitleBackground",JSON.stringify(y))},getScreen:function(){return r("App","getScreen",null)},showRightButton:function(A,z){var y={caption:A,callback:z};r("App","showRightButton",JSON.stringify(y))},hideRightButton:function(){r("App","hideRightButton","{}")},jumpToRealnameVerify:function(){r("App","jumpToRealnameVerify","{}")},jumpToAccountRecharge:function(z,A,B){var y={productNo:z,location:A};c("App","jumpToAccountRecharge",JSON.stringify(y),B)},execWhenReturnAndAppear:function(z){var y={execWhenReturnAndAppearJSFunc:z};c("App","execWhenReturnAndAppear",y)},jumpToNativeView:function(A,C,y,B){if(typeof C=="undefined"){C={}}var z=C;z.viewName=A;c("App","jumpToNativeView",JSON.stringify(z),y,B)}};var b={base64Encode:function(A){if(typeof(A)=="undefined"||typeof(A)!="object"){return false}else{var z={};var y="";y=r("UtilPlugin","base64Encode",JSON.stringify(A));z=JSON.parse(y);return z}},base64Decode:function(A){if(typeof(A)=="undefined"||typeof(A)!="object"){return false}else{var z={};var y="";y=r("UtilPlugin","base64Decode",JSON.stringify(A));z=JSON.parse(y);return z}}};var p={put:function(z,A,y){console.log("put-key:"+z+" value:"+A+" prefname:"+y);var B={key:z,value:A,prefname:y};r("Preference","put",JSON.stringify(B))},get:function(z,A,y){console.log("get-key:"+z+" defValue:"+A+" prefname:"+y);var B={key:z,defValue:A,prefname:y};return r("Preference","get",JSON.stringify(B))},putWithApp:function(y,z,A){this.put(y,z,A)},getWithApp:function(y,z,A){return this.get(y,z,A)}};var o={execSQL:function(z,C,A){var y={dbName:z,sql:C,params:A};var B=r("Storage","exeSQL",JSON.stringify(y));return B},createDatabase:function(C,A,z,B){var y={dbName:C,createSQL:A,upgradSQL:z,version:B};return r("Storage","createDatabase",JSON.stringify(y))},batchInsert:function(A,B,z,C){var y={dbName:A,tableName:B,columns:z,data:C};return r("Storage","batchInsert",JSON.stringify(y))}};var e={SERVICE:"File",copy:function(z,A){var y={path:z,newpath:A};var B=JSON.stringify(y);return r(e.SERVICE,"copy",B)},exists:function(z){var y={file_path:z};var A=JSON.stringify(y);return r(e.SERVICE,"exists",A)},remove:function(z){var y={path:z};return r(e.SERVICE,"remove",JSON.stringify(y))}};var q={};var h={showSingleChoiceDialog:function(C,A,z,D,y){var B={title:C,list:A,checkedItem:z,displayKey:D};return c("Dialog","showSingleChoiceDialog",JSON.stringify(B),y,null)},showSwitchDialog:function(C,A,z,B,y){var D={title:C,message:A,postext:z,negtext:B};return c("Dialog","showSwitchDialog",JSON.stringify(D),y,null)},showWaitDialog:function(z,y){var A={title:z,msg:y};return r("Dialog","showWaitDialog",JSON.stringify(A))},dismissDialog:function(z){var y={id:z};return r("Dialog","dismissDialog",JSON.stringify(y))},showProgressDialog:function(z,y){var A={title:z,msg:y};return r("Dialog","showProgressDialog",JSON.stringify(A))},jumpToAuthorityDialog:function(){return r("Dialog","jumpToAuthorityDialog",null)},alert:function(y){window.alert(y)}};var s={LENGTH_LONG:1,LENGTH_SHORT:0,makeText:function(z,y){var A={text:z,duration:y};alert(z)}};var d={openContacts:function(z,y){c("Contacts","openContacts","{}",z,y)},tel:function(y){var z={tel:y};return r("Contacts","call",JSON.stringify(z))}};var n={digest:function(A,z){var y={algorithm:A,source:z};return r("MessageDigest","digest",JSON.stringify(y))}};var f={getSign:function(y){return{}},getSignINF:function(y){return r("Security","getSignINF",JSON.stringify(y))},encrypt:function(z){var y={source:z};return r("Security","encrypt",JSON.stringify(y))},decrypt:function(z){var y={encryptedData:z};return r("Security","decrypt",JSON.stringify(y))},pinkeyEncrypt:function(z,y){var A={source:z,salt:y};return r("Security","pinkeyEncrypt",JSON.stringify(A))},encryptPassword:function(z,A,y){var B={account:z,password:A,encrypRandNumber:y};return r("Security","encryptPassword",JSON.stringify(B))}};var u=function(A,C,B,z,y,D){if(z){return r(A,C,B)}else{r(A,C,B,y,D)}};var a={idCounter:0,INPUT_CMDS:"",INPUT_ARGS:"",OUTPUT_RESULTS:"",CALLBACK_SUCCESS:function(y){console.log(y);return},CALLBACK_FAIL:function(y){console.log(y);return},callNative:function(A,B){this.INPUT_CMDS=A;this.INPUT_ARGS=B;var y="ID_"+(++this.idCounter);window.nintf.setCmds(this.getInputCmd(),y);window.nintf.setArgs(this.getInputArgs(),y);var z=document.createElement("IFRAME");z.setAttribute("src","bestpayhtml://ready?id="+y);document.documentElement.appendChild(z);z.parentNode.removeChild(z);z=null;console.log(2);console.log("return this.OUTPUT_RESULTS:"+this.OUTPUT_RESULTS);return this.OUTPUT_RESULTS},getInputCmd:function(){return JSON.stringify(this.INPUT_CMDS)},getInputArgs:function(){return this.INPUT_ARGS},callBackJs:function(A){this.OUTPUT_RESULTS=A;console.log(1);var B=JSON.parse(A);var z=B.message;console.log("message:"+z);var y=B.status;if(y==0){if(typeof this.CALLBACK_SUCCESS!="undefined"){setTimeout("BestpayHtml5.CALLBACK_SUCCESS('"+z+"')",0)}}else{if(typeof this.CALLBACK_FAIL!="undefined"){setTimeout("BestpayHtml5.CALLBACK_FAIL('"+z+"')",0)}}console.log("你先:("+(a.idCounter)+")"+A)}};var r=function(E,C,G){var y={service:E,action:C};var B=prompt(JSON.stringify(y),G);var A;try{A=JSON.parse(B)}catch(F){console.error(F.message)}var D=A.status;var z=A.message;if(D==0){return z}else{console.error("service:"+E+" action:"+C+" error:"+z)}};var l;var c=function(C,E,A,y,z){var D={service:C,action:E};if(typeof z!="success"){a.CALLBACK_SUCCESS=y}if(typeof z!="undefined"){a.CALLBACK_FAIL=z}else{a.CALLBACK_FAIL=function(){}}var B=a.callNative(D,A);console.log("我先:("+(a.idCounter)+")"+B)};return{Dialog:h,App:t,exec_asyn:c,exec:r,Preference:p,Contacts:d,User:g,Toast:s,BestpayHtml5:a,Storage:o,Security:f,PasswordKeyBoard:m,Scanner:v}});