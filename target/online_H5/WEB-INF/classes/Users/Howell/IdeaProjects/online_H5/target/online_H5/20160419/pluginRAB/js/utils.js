define(["jquery-jtemplates","static"],function(i,t){var g={DBName:"location.db",DBName1:"cardlist.sqlite"};var v=function(A,y,C){var D={service:A,action:y};var x=prompt(JSON.stringify(D),JSON.stringify(C));var w;try{w=JSON.parse(x)}catch(B){console.error(B.message)}var z=w.status;var E=w.message;if(z==0){return E}else{console.error("service:"+A+" action:"+y+" error:"+E)}};var u=0;var f=new Array();var n=0;var m=false;function k(y,w){if(rzType=="1"&&y=="choseShop"){document.title="选择认证类型"}if(y==="authorityPage"){var x=$("#setTitle").val()+"";if(x==="1"){document.title="企业商户认证"}else{if(x==="0"){document.title="个体商户认证"}else{if(x==="2"){document.title="员工认证"}}}}}function a(z,y){PasswordKeyBoard.hideKeyboardUI3();var x=document.getElementById(f[f.length-1]);if(z!="selectBankDiv"){x.style.display="none"}else{$("#selectBank_background").show()}document.getElementById(z).style.display="block";scroll(0,0);var w=f.length;f[w]=z;if(!o[z+"_title"]){document.title="翼支付+";App.setTitle("翼支付+")}else{document.title=o[z+"_title"];App.setTitle(o[z+"_title"])}console.log("pageIds.length=================="+f.length)}function q(){console.log("back()------->"+f.length);if($("#rechargeSuccessPage")!="undefined"&&$("#rechargeSuccessPage")!=undefined){$("#rechargeSuccessPage").hide()}if(show321){$("#alert_3to1").hide();show321=false;return}PasswordKeyBoard.hideKeyboardUI3();var w=f.length;if(w==1){App.exitApp();return}var y=f.pop();var x=document.getElementById(y);x.style.display="none";if(y=="selectBankDiv"){$("#selectBank_background").hide()}if(y=="rechargeSuccessPage"){App.exitApp()}if(y=="page_zhuangrusuccess"){App.exitApp()}h(y);w=f.length;var z=f[w-1];if(z=="page0"){App.exitApp();return}if(faZhState==true&&z=="jiaoFeiYiRechargePage"){App.setThresholdBtnIsVisable(true)}else{App.setThresholdBtnIsVisable(false)}if(!o[z+"_title"]){document.title="翼支付+";App.setTitle("翼支付+")}else{document.title=o[z+"_title"];App.setTitle(o[z+"_title"])}x=document.getElementById(z);window.scroll(0,0);x.style.display="block";k(z)}function h(w){}function e(w){if(m){return}if(w=="backpress"){q()}}var d={disable:function(){m=true},able:function(){m=false}};var o={accountTypePage_title:"选择账户",jiaoFeiYiRechargePage_title:"充值",zijRchargePage_title:"资金充值",rechargeConfirmPage_title:"订单确认",rechargeSuccessPage_title:"订单确认",unbundling_title:"银行卡解绑",unbund_dialog_title:"解绑成功",unbund_dialog2_title:"解绑失败",updateAuthPage_title:"修改认证",geRenAuthPage_title:"个人认证",qiYeAuthPage_title:"企业认证",bindCardPage_title:"添加银行卡",updateFaZhiPage_title:"充值安全设置",addFaZhiPage_title:"充值安全阀值设置",quickBindCardPage_title:"安全验证",bandKaSuccess_title:"绑卡成功",bangFuTongBindCardPage_title:"帮付通绑卡",authselectdizPage_title:"选择地区",selectBankDiv_title:"添加银行卡",supportBankListPage_title:"支持银行列表",merchantNamePage_title:"商户名称",applicantNamePage_title:"申请人姓名",choseShop_title:"选择认证类型",authorityPage_title:"修改认证",nextAuthorityPage_title:"证件上传",nextQiYeAuthorityPage_title:"企业认证",serviceProtocalPage_title:"代扣协议",passVailPage_title:"密码校验",yingYeNoPicDiv_title:"营业执照",auth_profession_title:"修改认证",company_code_title:"填写所属公司",company_chackout_title:"所属企业",page_change_can_pay_title:"支付密码",page_zhuangrusuccess_title:"转入成功"};var c={logoList:{"866000":"images/bank/yzyh.png","866100":"images/bank/zgyh.png","866200":"images/bank/gsyh.png","866300":"images/bank/nyyh.png","866400":"images/bank/jtyh.png","866500":"images/bank/jsyh.png","866600":"images/bank/msyh.png","866700":"images/bank/hxyh.png","866800":"images/bank/gfyh.png","866900":"images/bank/zsyh.png","867000":"images/bank/gzyh.png","867200":"images/bank/gdyh.png","867400":"images/bank/zxyh.png","867600":"images/bank/xyyh.png","865700":"images/bank/payh.png","865500":"images/bank/shyh.png","867100":"images/bank/pfyh.png"},showDialog:function(w){if(u!=0){this.dismissDialog()}if(w==null||w==""){w="正在提交订单,请稍候..."}u=Dialog.showProgressDialog("",w)},dismissDialog:function(){if(u==0){return}Dialog.dismissDialog(u);u=0},getKeep:function(){var y="";var z=new Date();var w=z.getFullYear();var A=z.getMonth()+1;A=A<10?"0"+A:A;var D=z.getDate()<10?"0"+z.getDate():z.getDate();var B=z.getHours()<10?"0"+z.getHours():z.getHours();var C=z.getMinutes()<10?"0"+z.getMinutes():z.getMinutes();var x=z.getSeconds()<10?"0"+z.getSeconds():z.getSeconds();var E=Math.round(Math.random()*8999+1000);y="440106003094"+w+""+A+""+D+""+B+""+C+""+x+""+E;return y},getOrderSeq:function(){var y="";var z=new Date();var w=z.getFullYear();var A=z.getMonth()+1;A=A<10?"0"+A:A;var D=z.getDate()<10?"0"+z.getDate():z.getDate();var B=z.getHours()<10?"0"+z.getHours():z.getHours();var C=z.getMinutes()<10?"0"+z.getMinutes():z.getMinutes();var x=z.getSeconds()<10?"0"+z.getSeconds():z.getSeconds();var E=Math.round(Math.random()*899+100);y=w+""+A+""+D+""+B+""+C+""+x+""+E;return y},getTime:function(){var z="";var w=new Date();var C=w.getFullYear();var D=w.getMonth()+1;D=D<10?"0"+D:D;var B=w.getDate()<10?"0"+w.getDate():w.getDate();var x=w.getHours()<10?"0"+w.getHours():w.getHours();var y=w.getMinutes()<10?"0"+w.getMinutes():w.getMinutes();var A=w.getSeconds()<10?"0"+w.getSeconds():w.getSeconds();z=C+""+D+""+B+""+x+""+y+""+A;return z},getRandomParams:function(){var w={bisChannel:bisChannel,clientVersion:deviceInfo.clientVersion,imei:"",imsi:"",merId:"8613052900079605",model:deviceInfo.model,signVer:"2",channelCode:"20",softwareType:deviceInfo.systemType,vender:deviceInfo.vender,tmnNum:c.getTmnNumber(),keep:c.getKeep()};return w},getUtilParams:function(){var x;if(androidOrIos=="ios"){x=App.getDeviceInfo()}else{x=JSON.parse(App.getDeviceInfo())}var w={bisChannel:bisChannel,clientVersion:x.clientVersion,imei:"868033018056319",imsi:"460016981605425",model:x.model,signType:"RSA",softwareType:"翼支付+",systemType:x.systemType,systemVersion:x.systemVersion,vender:x.vender,tmnNum:c.getTmnNumber(),merId:"8613052900079605"};return w},getDeviceInfo:function(x){var w="";if(androidOrIos=="ios"){w=App.getDeviceInfo()}else{w=JSON.parse(App.getDeviceInfo())}console.log(JSON.stringify(w));x.clientVersion=w.clientVersion;x.imei=w.imei;x.imsi=w.imsi;x.model=w.model;x.systemType=w.systemType;x.systemVersion=w.systemVersion;x.vender=w.vender;x.operationCode=w.operationCode;x.isSucc=w.isSucc;x.operCity=w.operCity;x.prmotePort=w.prmotePort;x.deviceName=w.deviceName;x.mac=w.mac;x.kernelVersion=w.kernelVersion;x.aidentifier=w.aidentifier;x.bestpayId=w.bestpayId;x.cpuId=w.cpuId;x.diskInfo=w.diskInfo;x.signType="RSA";return x},urlParameters:function(w){var y;if(w==null){y=document.URL}else{y=w}if(y.lastIndexOf("#")!=-1){y=y.substring(0,y.lastIndexOf("#"))}var x="";var z={};if(y.lastIndexOf("?")>0){x=y.substring(y.lastIndexOf("?")+1,y.length);var B=x.split("&");x="";for(var A=0;A<B.length;A++){z[B[A].split("=")[0]]=B[A].split("=")[1]}console.log("url-------------"+JSON.stringify(z))}else{console.log("没有参数!")}return z},getTmnNumber:function(){var w="";switch(ENV){case PRODUCT:case PRE_PRODUCT:w="440106014022";break;case PUBLIC:case ENV44:case ENV46:w="440106003094";break;default:w="440106014021"}return w},getMerId:function(){var w="";switch(ENV){case PRODUCT:case PRE_PRODUCT:w="8604400000143100";break;case PUBLIC:case ENV44:case ENV46:w="8613051700001006";break;default:w="8613052900079605"}return w},alert:function(x,y,w){if(w==null){w="确定"}Dialog.showAlertDialog("提醒",x,w,"",y)},alertDoubleBtn:function(A,y,w,C,z,x,B){document.getElementById(A).style.display="block";document.getElementById(y).innerHTML=z;document.getElementById(w).innerHTML=x;document.getElementById(w).onclick=function(){if(B!=null&&B!=undefined){B()}document.getElementById(A).style.display="none";d.able()};document.getElementById(C).onclick=function(){document.getElementById(A).style.display="none";d.able()};d.disable()},alertNewDoubleBtn:function(y,w,G,F,z,D,x,E,A,C,B){if(B!=null&&B!=undefined){document.getElementById(G).innerHTML=B}document.getElementById(y).style.display="block";document.getElementById(w).innerHTML=z;document.getElementById(G).innerHTML=D;document.getElementById(E).innerHTML=C;document.getElementById(G).onclick=function(){if(x!=null&&x!=undefined){x()}document.getElementById(y).style.display="none";d.able()};document.getElementById(F).onclick=function(){console.log("--------------------------"+A);document.getElementById(y).style.display="none";if(x!=null&&x!=undefined){console.log("--------------------------");A()}d.able()};d.disable()},logoToBank:function(x,w){document.getElementById(x).src=c.logoList[w]},tabChange:function(z,y,x){var w=$("#"+z).children();c.hiddenElt(y,x);c.tab1Show(w[0]);c.tab2Show(w[1]);$(w[1]).css("background-color","#ffffff");$(w[1].children[0]).css("margin-left","0px").css("color","#000000");$(w[1].children[1]).css("display","none");w.each(function(){this.onclick=function(){var A=this.id;$(this.children[0]).css("margin-left","20px").css("color","#ffffff");$(this.children[1]).css("display","block");$(this).css("background-color","#0097FE");if("tab1"==A){c.tab2Show(w[1]);c.hiddenElt(y,x);faZhState=true;if(bindBankState){App.setThresholdBtnIsVisable(true)}}else{if("tab2"==A){c.tab2Show(w[0]);c.hiddenElt(x,y);faZhState=false;App.setThresholdBtnIsVisable(false)}}}})},tab1Show:function(w){$(w.children[0]).css("margin-left","20px").css("color","#ffffff");$(w.children[1]).css("display","block");$(w).css("background-color","#0097FE")},tab2Show:function(w){$(w).css("background-color","#ffffff");$(w.children[0]).css("margin-left","0px").css("color","#000000");$(w.children[1]).css("display","none")},hiddenElt:function(x,w){document.getElementById(x).style.display="block";document.getElementById(w).style.display="none"},isNumber:function(x,w,y){if(x==""||isNaN(x)==true){return false}if(x>w||x<y){return false}return true},sendPostRequest:function(A,y,C,z){var w="ran"+Math.floor(Math.random()*100+1);var B=Date.parse(new Date());A=A+"?"+w+"="+B;console.log("requesturl:"+A);if(z==null||z=="undefined"){z=function(E,G,F){PasswordKeyBoard.hideKeyboardUI3();console.log(E.status+" "+E.readyState+"   textStatus:"+G+" \n errorThrow"+F);c.dismissDialog();Dialog.showAlertDialog("提醒","⊙_⊙网络不给力哦，请检查后再试哈","确定","")}}var D=function(E){var F=Security.verifySign(E);if(F!=null&&F==="false"){Dialog.showAlertTwoBtnDialog("验签失败","您目前的网络可能存在安全隐患，请修改网络环境，如涉及交易，请联系客服查询订单状态。","重新登录","取消","",function(G){User.login()});return}C(E)};try{$.ajax({url:A,type:"POST",data:JSON.stringify(y),timeout:1000000,contentType:"application/json; charset=utf-8",dataType:"json",success:D,error:z})}catch(x){console.error(x.message);c.dismissDialog();Dialog.showAlertDialog("提醒","⊙_⊙网络不给力哦，请检查后再试哈","确定","")}},sendPostXmlRequest:function(B,y,A,x,w,E,D,C){console.log("requesturl------>"+B);if(x==null||x=="undefined"){x=function(F,H,G){c.dismissDialog();console.log(F.responseText+"---------"+F.status+"-------------"+H)}}try{$.ajax({url:B,type:"POST",data:y,timeout:600000,beforeSend:function(F){F.setRequestHeader("SOAPAction","http://schemas.microsoft.com/sharepoint/soap/GetAttachmentCollection")},contentType:"text/xml;charset=utf-8",dataType:"text",success:A,error:x})}catch(z){console.error(z.message);c.dismissDialog()}},getSQLiteData:function r(){var w=DB_Data.getCardList();console.log("CardList-- result:"+JSON.stringify(w));var x=w;return x},loadXml:function(x){var w=new DOMParser();var y=w.parseFromString(x,"text/xml");return y},notEmptyVail:function(y,w,x){if(x==null||x==undefined){if($("#"+y).val().trim().length==0){$("#"+y).val("");Toast.makeText(w,LENGTHLONG);return false}$("#"+y).val($("#"+y).val().trim());return true}else{if($("#"+x).val().trim().length==0){$("#"+x).val("");Toast.makeText(w,LENGTHLONG);return}$("#"+y).val($("#"+x).val().trim());$("#"+x).val($("#"+x).val().trim());q()}},conditionNotEmptyVail:function(w,x){if($("#"+w).text().trim().length==0){$("#"+w).text("");Toast.makeText(x,LENGTHLONG);return false}$("#"+w).text($("#"+w).text().trim());return true},emailVail:function p(x){if(x!=null&&x!=undefined){var w=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;if($("#"+x).val().trim().length==0||!w.test($("#"+x).val().trim())){Toast.makeText("请填写有效联系邮箱",LENGTHLONG);return false}return true}Toast.makeText("请输入正确的申请人邮箱地址",LENGTHLONG)},idCardVail:function s(x){if(x!=null&&x!=undefined){var w=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;if($("#"+x).val().trim().length==0||!w.test($("#"+x).val().trim())){Toast.makeText("请输入正确的身份证号码",LENGTHLONG);return false}return true}Toast.makeText("请输入正确的身份证号码",LENGTHLONG)},bankNoVail:function b(y){if(y!=null&&y!=undefined){var x=$("#"+y).val().replace(/\s+/g,"");var w=/^\d{16}|\d{19}$/;if(x.toString().trim().length==0){Toast.makeText("请输入银行账号",LENGTHLONG);return false}if(!w.test(x.toString().trim())){Toast.makeText("您请输入的银行账号长度有误",LENGTHLONG);return false}return true}Toast.makeText("请输入银行账号",LENGTHLONG)},phoneNumVail:function j(y){if(y!=null&&y!=undefined){var x=$("#"+y).val().replace(/\s+/g,"");var w=/^1[3|5|7|8|][0-9]{9}$/;if(x.toString().trim().length==0||!w.test(x.toString().trim())){Toast.makeText("请输入正确的手机号码",LENGTHLONG);return false}return true}Toast.makeText("请输入正确的手机号码",LENGTHLONG)}};var l=function(){var w=$(".btn-common-out");w.on("touchstart",function(){$(this).css({"background-color":"#e27100"})});w.on("touchend touchmove touchcancel",function(){$(this).css({"background-color":"#ff7f00"})})};l();return{pageIds:f,toNextPage:a,onback:e,back:q,sendPostRequest:c.sendPostRequest,sendPostXmlRequest:c.sendPostXmlRequest,showDialog:c.showDialog,dismissDialog:c.dismissDialog,getKeep:c.getKeep,getUtilParams:c.getUtilParams,alert:c.alert,logoToBank:c.logoToBank,loadXml:c.loadXml,getTime:c.getTime,tabChange:c.tabChange,getOrderSeq:c.getOrderSeq,isNumber:c.isNumber,alertDoubleBtn:c.alertDoubleBtn,alertNewDoubleBtn:c.alertNewDoubleBtn,getRandomParams:c.getRandomParams,getRandom:c.getRandom,notEmptyVail:c.notEmptyVail,conditionNotEmptyVail:c.conditionNotEmptyVail,ReadDataBase:g,getSQLiteData:c.getSQLiteData,emailVail:c.emailVail,idCardVail:c.idCardVail,bankNoVail:c.bankNoVail,phoneNumVail:c.phoneNumVail,exec_transfer:v,getDeviceInfo:c.getDeviceInfo,urlParameters:c.urlParameters}});