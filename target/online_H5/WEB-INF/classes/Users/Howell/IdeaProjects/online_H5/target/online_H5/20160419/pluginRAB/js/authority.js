define(["utils","jquery","jquery-jtemplates"],function(d,E,ab){var ad=User.getProduct();var A=useInfoIOS.custCode;var J=useInfoIOS.staffCode;var q=useInfoIOS.prtnCode;var h="1";var ac="2";var B=0;var I="";var x=useInfoIOS.hadEpt;var V=useInfoIOS.bankMode;var ag=useInfoIOS.productType;var L=useInfoIOS.prinType;var K=false;var Y=false;var ah=null;var P=null;var n="";var a="";var N="";var aj="";var y="";var Q="";var w="";var u="";var af="";var ai="";var X="2";var g="";var i="";var F=null;var j=d.urlParameters();var M=true;var z=false;var O="";E("#loading").hide();console.log("hadEptinfo==============="+x);console.log("useInfoIOS=="+JSON.stringify(useInfoIOS));console.log("hadEptinfo==="+x);console.log("bankMode==="+V);console.log("productType==="+ag);console.log("urlParameters==="+JSON.stringify(j));if(x=="1"){console.log("8888888已经认22证和开通添益宝了-------");E("#showapplicantname").unbind();E("#authapplyname").attr("readonly","true");E("#authIdNo").attr("readonly","true");E("#tybTips").show();console.log("8888888已经认证和开通333222222222添益宝了-------");b("0",true)}else{if(j.worker_recetification==="worker"){b("2",true)}else{E("#choseShop").show();E("#tybTips").hide();App.setTitle("选择认证类型")}}console.log("this showDialog");G();v();E(".main_rz").on("click",b);function b(am,al){console.log("pageIds==========="+JSON.stringify(d.pageIds));B=E(this).data("code");console.log("merchantType1= "+B);console.log("merchantType typeof= "+typeof B);if(al){B=am}console.log("进来了： "+B+" "+X);if(B=="1"&&X==="2"){Dialog.showAlertTwoBtnDialog("提醒","商户认证为企业商户，酬金为月度结算，商户需自行前往当地税务局，开具种类为“服务费”或“酬金”的税务发票寄回支付公司，支付公司审核后可发放。","知道了","取消","",function(an){X=an;console.log("goContinual================"+X);if(X==="1"){b(B,true)}});return}E("#licenceNomber").show();c(B);console.log("merchantType======="+B);console.log("info:page authority onLoad ");E("#autoNextTwoButton").on("click",e);aa();E("#showapplicantname").off("click");E("#showapplicantname").on("click",t);B+="";if(B==="1"){document.title="企业商户认证";App.setTitle("企业商户认证");E("#setTitle").val(1);W("modify_shopName","商户名称");W("modify_shopAddress","企业地址");f("modify_shopAddress","请填写公司企业地址");W("modify_jyz","代理人");f("modify_jyz","请填写代理申请人姓名");f("authIdNo","代理申请人身份证号码","me");f("authemail","请填写代理申请人联系邮箱","me");E("#gerenShow").hide();E("#qiyeShow").show();E("#showShoptype").hide();E(".yzrz").show();E("#yarz2").show();E("#ygrz_next_Btn").hide();console.log("企业商户认证=================")}else{if(B==="0"){document.title="个体商户认证";App.setTitle("个体商户认证");E("#setTitle").val(0);W("modify_shopName","商铺名称");W("modify_shopAddress","商铺地址");f("modify_shopAddress","请填写商铺地址");W("modify_jyz","经营者");f("modify_jyz","营业执照负责人一栏");f("authIdNo","经营者身份证号码","me");f("authemail","请填写有效联系邮箱","me");E("#gerenShow").show();E("#qiyeShow").hide();E("#showShoptype").show();E(".yzrz").show();E("#yarz2").show();E("#ygrz_next_Btn").hide();console.log("个体商户认证=================")}else{if(B==="2"){document.title="员工认证";App.setTitle("员工认证");E("#setTitle").val(2);W("modify_jyz","申请人姓名");f("modify_jyz","请填写");E(".yzrz").hide();E("#yarz2").hide();E("#ygrz_next_Btn").show();E("#showapplicantname").off("click")}}}}E(".ornotagreement").on("click",function(){E(".ornotagreement").toggleClass("c_sub_bg");E(".showxieyi").toggleClass("hidexieyi");if(E(".ornotagreement").is(".c_sub_bg")){h="0";ac="0";console.log("ornotagreement=="+h)}else{h="1";ac="2";E(".agreement").removeClass("c_sub_bg");console.log("ornotagreement=="+h)}});E(".agreement").on("click",function(){E(".agreement").toggleClass("c_sub_bg");if(E(".agreement").is(".c_sub_bg")){ac="0";console.log("agreement=="+ac)}else{ac="2";console.log("agreement=="+ac)}});E("#business_record").on("click",function(){console.log("111111");m("page_record","page_know","page_fuwu","file/tyb.html")});document.getElementById("business_know").onclick=function(){console.log("22222");m("page_know","page_record","page_fuwu","file/jjxy.html")};document.getElementById("business_fuwu").onclick=function(){console.log("333333");m("page_fuwu","page_record","page_know","file/zjtz.html")};document.getElementById("fat_btn").onclick=function(){d.back()};function k(){d.dismissDialog();d.showDialog("正在查询你的信息，请稍等..");var am={staffCode:J,channelCode:"20",custCode:A,merId:q,tmnNum:"440106014113",keep:d.getKeep(),bisChannel:bisChannel,prtnCode:g};d.getDeviceInfo(am);var an=Security.getSign(am);am.sign=an;am.signVer="2";console.log("企业编码查询SAut004 入参："+JSON.stringify((am)));var al=function(ar){console.log("企业编码查询SAut004 出参： Result --> "+JSON.stringify(ar));document.title="所属企业";App.setTitle("所属企业");d.dismissDialog();if(ar.code==TOKENLOST){var aq=function(){User.login(ad)};d.alert("⊙_⊙,为了您的账户安全，请您重新登录。",aq);return}else{if(ar.code!="000000"){if(ar.code=="011053"){d.alert("商户编码有误，请重新输入！")}return}}var ap="";var ao=false;z=false;M=true;if(ar.operFlag==="S0F"){ap="已冻结"}else{if(ar.operFlag==="S0G"){ap="已销户"}else{if(ar.operFlag==="S0X"){ap="无效"}else{if(ar.operFlag==="S0A"){if(ar.lastapprStat==="S0V"){ap="待审核"}else{if(ar.lastapprStat==="S0F"){ap="审核不通过"}else{if(ar.lastapprStat==="S0A"){ao=true}}}}else{ap="无效"}}}}if(!ao){d.toNextPage("company_chackout");O="您的账号"+ap+",请返回再试!";z=true}console.log("JSONResult.prntCode==========="+ar.prntCode);if(!ar.prntCode){M=false;d.alert("亲，您所查询的商家不存在！");return}g=ar.prntCode||g;i=ar.custName||"未能查到商家名称";console.log("prtnCode============"+g);E("#SAut004_val").html(i);d.toNextPage("company_chackout");if(j.worker_recetification==="worker"){d.pageIds.shift()}};d.sendPostRequest(URL+Method.SAut004,am,al,null)}E("#company_next").on("click",function(){if(!d.notEmptyVail("company_code_val","请输入企业代码")){verifyFocus("company_code_val");return}g=E("#company_code_val").val();k()});E("#company_chackout_next").on("click",function(){console.log("prinType===="+L);console.log("josnDLS========"+M);if(!M&&L!=="Pt901"){d.alert("很抱歉，您不是代理商，没有操作权限！");return}if(z){d.alert(O);return}d.toNextPage("authorityPage")});function m(am,aq,ap,al){console.log("协议");d.toNextPage("page_record_father");var ao=document.getElementById(am);console.log("xieyi");ao.innerHTML="";document.getElementById(aq).innerHTML="";document.getElementById(ap).innerHTML="";var an=E(ao).setTemplateURL(al);an.processTemplate(null)}function v(){ak("authIdNo");ak("authemail");ak("company_code_val")}function ak(al){E("#"+al).on("input",function(){var am=E(this).val();var an=E(this).siblings(".clearInfo");if(am.length>0){an.show();an.click(function(){an.hide();E("#"+al).val("")})}else{an.hide()}if(al=="authIdNo"){E(this).val(am.replace(/[^\dXx.]/g,""))}})}function W(am,al){E("#"+am).html(al)}function f(am,al,an){if(an==="me"){E("#"+am).attr("placeholder",al)}else{E("#"+am).siblings("input").attr("placeholder",al)}}function o(){var am={staffCode:J,channelCode:"20",custCode:A,merId:q,tmnNum:"440106014113",bisChannel:bisChannel,keep:d.getKeep()};d.getDeviceInfo(am);var an=Security.getSign(am);am.sign=an;am.signVer="2";E("#kaotong_agreement").show();console.log("infoInit() 入参："+JSON.stringify((am)));var al=function(aq){console.log("info:Method:SReg003  出参： Result --> "+JSON.stringify(aq));d.dismissDialog();document.title="修改认证";App.setTitle("修改认证");if(aq.code==TOKENLOST){var ao=function(){User.login(ad)};d.alert("⊙_⊙,为了您的账户安全，请您重新登录。",ao);return}else{if(aq.code!="000000"){d.alert("亲,获取您的基本信息失败，"+aq.content);return}}if(aq.authStat=="A00"){var ao=function(){d.back()};d.alert("您的认证信息还在审核中，请耐心等候... ...",ao);return}else{if(aq.authStat=="A01"){console.log("merchantType==="+B);console.log("bankMode==="+V);console.log("productType==="+ag);if(B*1==0){if(ag=="2"){if(V=="BT1001"||V=="BT1013"){E("#kaotong_agreement").show()}else{E("#kaotong_agreement").hide()}}else{E("#kaotong_agreement").hide()}}else{E("#kaotong_agreement").hide()}console.log('JSONResult.authStat == "A01"'+aq.authStat)}else{if(aq.authStat=="A02"||aq.authStat=="A99"){console.log("JSONResult.authStat=="+aq.authStat);document.title="修改认证";App.setTitle("修改认证");console.log("params.authStat=="+am.authStat);console.log("hadEptinfo==="+x);if(am.authStat=="A02"&&x=="1"){console.log("已经认证和开通添益宝了-------");E("#showapplicantname").unbind();E("#showapplicantname_bggray").addClass("gray_bg");E("#showapplicantname_bggray #authapplyname").addClass("gray_bg");E("#authIdNo").attr("readonly","true");E("#show_creditcard").addClass("gray_bg");E("#show_creditcard #authIdNo").addClass("gray_bg");E("[name = merchantTypeChoose]").unbind();console.log("已经认证和开通222222222添益宝了-------")}}else{if(aq.authStat=="A03"){var ao=function(){d.back()};d.alert("您已经认证...",ao);return}}}}console.log("SReg003出参000000"+JSON.stringify(aq));E("#authshanghum").val(aq.prtnName);E("#merchantName").val(aq.prtnName);E("#authapplyname").val(aq.applyer);E("#applicantName").val(aq.applyer);E("#authIdNo").val(aq.appCertNo);U=aq.areaCode;var ap={code:U};var ar=DB_Data.getProCityDistric(U);E("#authareas").val(ar.ProvinceName+"-"+ar.CityName+"-"+ar.CountyName)};d.sendPostRequest(URL+Method.SReg003,am,al,null)}E("[name=textInput]").click(function(){E(this).children("div").children("div").children("input").onfocus()});E("[name=upImage]").click(function(){console.log("------click------");var an=E(this).attr("id");var al=parseInt(E(this).text());var am={LOGID:E("#"+an+"LogId").text(),TYPE:al,WHEATHERTHREEINONE:K};console.log("上传图片入参--> "+JSON.stringify(am));Scanner.handlerVerifyPhoto(am,function(aq){var ap=JSON.stringify(aq);ap=ap.substring(1,ap.length-1);console.log("JSONResult====================="+ap);console.log("id============================="+an);if(an==="image12"&&!!ap){E("#imageLogId").text(ap);E("#image3LogId").text(ap);E("#image4LogId").text(ap);K=true;Y=true;E("#okImg").show();E("#noneImg").hide();E("#okImg3").show();E("#noneImg3").hide();E("#okImg4").show();E("#noneImg4").hide()}if(an==="image"||an==="image3"||an==="image4"){K=false;Y=false}E("#"+an+"LogId").text(ap);console.log("logId11111111============================="+ap);function ar(){console.log("显示图片！！");var at={LOGID:E("#"+an+"LogId").text(),TYPE:al,WHEATHERTHREEINONE:K};Scanner.handlerVerifyPhoto(at,function(av){var au=JSON.stringify(av);au=au.substring(1,au.length-1);if(an==="image12"&&!!au){E("#imageLogId").text(au);E("#image3LogId").text(au);E("#image4LogId").text(au)}E("#"+an+"LogId").text(au);console.log("logId2222222222============================="+au)},function(){Toast.makeText("取消上传！",LENGTHLONG)})}var ao=an.replace("image","");E("#okImg"+ao).show();E("#noneImg"+ao).hide();E("#showImgTitle"+ao).unbind();E("#showImgTitle"+ao).click(ar)},function(){Toast.makeText("取消上传！",LENGTHLONG)})});function G(){for(var al=1;al<=18;al++){E("#showImgTitle"+al).click(H)}E("#showImgTitle").click(H)}function H(){var am="image";var al=E(this).attr("id");am+=al.replace("showImgTitle","");E("#"+am).click()}var ae="";E("#showImgTitle_y").click(function(){E("#authyingyezhizhhm_back").blur();E("#authyingyezhizhhm_back").val("");E("#id_clearauthyingyezhizhhm_back").hide();E("#authyingyezhizhhm_back").on("input",function(){var am=E(this).val();if(ae.length<am.length&&am.replace(ae,"").length>1){E(this).val(ae)}E("#authyingyezhizhhm_back").val(E("#authyingyezhizhhm_back").val().replace(/[^a-zA-Z0-9]+/,""));ae=E("#authyingyezhizhhm_back").val();var al=E(this).val();if(al.length>0){E("#id_clearauthyingyezhizhhm_back").show();E("#id_clearauthyingyezhizhhm_back").click(function(){E("#authyingyezhizhhm_back").val("");E("#id_clearauthyingyezhizhhm_back").hide()})}else{E("#id_clearauthyingyezhizhhm_back").hide()}});d.toNextPage("yingYeNoPicDiv")});E("#autoNextTwoButton_back").click(function(){var al=E("#authyingyezhizhhm_back").val();if(al.length<11){Toast.makeText("请输入11位至18位的营业执照编号！",LENGTHLONG)}else{E("#authyingyezhizhhm").val(al);E("#y_okImg").show();E("#y_noneImg").hide();d.back()}});E("#ygrz_next_Btn").on("click",function(){var an=E("#authemail").attr("hide_date");var am=E("#authIdNo").attr("hide_date");var al=E("#authIdNo").val();if((/\*/g).test(al)){al=N}if(!d.notEmptyVail("authapplyname","请填写申请人姓名")){return}else{if(!d.notEmptyVail("authIdNo","请填写身份证号码")){return}else{if(!d.notEmptyVail("authemail","请填写电子邮箱")){return}}}if(am==null||am==""||!!E("#authIdNo").val()){if(E("#authIdNo").val().indexOf("*")<0){if(!d.idCardVail("authIdNo")){verifyFocus("authIdNo");return}}}if(an==null||an==""||!!E("#authemail").val()){if(!d.emailVail("authemail")){verifyFocus("authemail");return}}E("#yuangongConfirm").click(function(){r()});R(al)});E("#authorityNextStepBtn").on("click",function(){console.log("next click----------------------------------");var ao=E("#authemail").attr("hide_date");var am=E("#authIdNo").attr("hide_date");var ap=E("#authdizhi").attr("hide_date");var an=E("#authshanghum").val();var aq=E("#authyingyezhizhhm").val();var al=E("#authIdNo").val();if((/\*/g).test(al)){al=N}if(!d.notEmptyVail("ahthHangYeId","请选择您的行业")){return}else{if(!d.notEmptyVail("authshanghum",ERROR.authShangHuNameEmptyError)){return}}if(SHOPTYPE_Z=="01"){if(!d.notEmptyVail("authyingyezhizhhm","请输入您的营业执照号")){return}}if(U==null||U==""||U==undefined){Toast.makeText("请选择完整的地区！",LENGTHLONG);return}else{if(!d.notEmptyVail("authdizhi","请填写地址")){verifyFocus("authdizhi");return}else{if(!d.notEmptyVail("authapplyname",ERROR.authapplyNameEmptyError)){return}else{if(am==null||am==""||E("#authIdNo").val()!=""){if(E("#authIdNo").val().indexOf("*")<0){if(!d.idCardVail("authIdNo")){verifyFocus("authIdNo");return}}}}}}if(ao==null||ao==""||E("#authemail").val()!=""){if(!d.emailVail("authemail")){verifyFocus("authemail");return}}if((/[`~!#\$%\^\&\*\(\)_\+<>\?:"\{\},\.\\\/;'\[\]]/g).test(E("#merchantName").val())){Toast.makeText("商铺名称/商户名称不能包含特殊字符!",LENGTHLONG);return}else{if((/[`~!#\$%\^\&\*\(\)_\+<>\?:"\{\},\.\\\/;'\[\]]/g).test(E("#applicantName").val())){Toast.makeText("经营者/代理人不能包含特殊字符!",LENGTHLONG);return}else{if((/[`~!#\$%\^\&\*\(\)_\+<>\?:"\{\},\.\\\/;'\[\]]/g).test(E("#authdizhi").val())){Toast.makeText("商铺地址/企业地址不能包含特殊字符!",LENGTHLONG);return}}}p(an,aq,al)});function p(ao,aq,al){d.showDialog("请稍等..");var am={staffCode:J,channelCode:"20",custCode:A,merId:q,tmnNum:"440106014113",keep:d.getKeep(),bisChannel:bisChannel,checkType:"prtnName",checkValue:ao};d.getDeviceInfo(am);var an=Security.getSign(am);am.sign=an;am.signVer="2";console.log("MAut005 入参："+JSON.stringify((am)));var ap=function(at){console.log("MAut005 出参： Result --> "+JSON.stringify(at));d.dismissDialog();if(at.code==TOKENLOST){var ar=function(){User.login(ad)};d.alert("⊙_⊙,为了您的账户安全，请您重新登录。",ar);return}else{if(at.code!="000000"){d.alert(at.content);return}}if(SHOPTYPE_Z=="01"){C(aq,al)}else{R(al)}};d.sendPostRequest(URL+Method.MAut005,am,ap,null)}function C(ap,al){d.showDialog("请稍等..");var am={staffCode:J,channelCode:"20",custCode:A,merId:q,tmnNum:"440106014113",keep:d.getKeep(),bisChannel:bisChannel,checkType:"licence",checkValue:ap};d.getDeviceInfo(am);var an=Security.getSign(am);am.sign=an;am.signVer="2";console.log("MAut005 入参："+JSON.stringify((am)));var ao=function(ar){console.log("MAut005 出参： Result --> "+JSON.stringify(ar));d.dismissDialog();if(ar.code==TOKENLOST){var aq=function(){User.login(ad)};d.alert("⊙_⊙,为了您的账户安全，请您重新登录。",aq);return}else{if(ar.code!="000000"){d.alert(ar.content);return}}R(al)};d.sendPostRequest(URL+Method.MAut005,am,ao,null)}function R(al){d.showDialog("请稍等..");var am={staffCode:J,channelCode:"20",custCode:A,merId:q,tmnNum:"440106014113",keep:d.getKeep(),bisChannel:bisChannel,checkType:"appCertNo",checkValue:al};d.getDeviceInfo(am);var an=Security.getSign(am);am.sign=an;am.signVer="2";console.log("MAut005 入参："+JSON.stringify((am)));var ao=function(aq){console.log("MAut005 出参： Result --> "+JSON.stringify(aq));d.dismissDialog();if(aq.code==TOKENLOST){var ap=function(){User.login(ad)};d.alert("⊙_⊙,为了您的账户安全，请您重新登录。",ap);return}else{if(aq.code!="000000"){d.alert(aq.content);return}}d.toNextPage("nextAuthorityPage")};d.sendPostRequest(URL+Method.MAut005,am,ao,null)}E("#autoNextThreeButton").click(function(){if(d.conditionNotEmptyVail("imageLogId","请上传您的营业执照副本")&&d.conditionNotEmptyVail("image3LogId","请上传您的组织机构代码证照片")&&d.conditionNotEmptyVail("image4LogId","请上传您的税务登记证照片")){d.toNextPage("nextQiYeAuthorityPage")}});E("#qiyeRenZhengConfirm").click(function(){l()});E("#authareasShow").click(function(){s="authareas";T("authprovice","getProvinceData","provice",null,true)});var U;var D={};function T(ap,ar,al,at,an){var ao="";console.log(an);if(!an){E("#"+ap).html(ao);E("#authdistrict").html(ao)}console.log("-----"+ar+"-----");if(at!=null){console.log("地区入参 --> "+JSON.stringify(at))}var am=DB_Data.getActionCode(ar,JSON.stringify(at));console.log("地区出参 --> "+JSON.stringify(am));for(var aq=0;aq<am.length;aq++){ao+="<div style = 'padding: 2px 0px 2px 0px;text-align:center;width:100%;border-bottom:1px solid #e4d9d9 ; margin:0px;' class='proviceCity "+al+"'>"+am[aq].name+"<span style='display:none;'>"+am[aq].code+"</span></div>"}E("#"+ap).html(ao);E("."+al).click(function(){if(ap!="authdistrict"){T(ap=="authcity"?"authdistrict":"authcity",ar=="getCityData()"?"getDistrictData":"getCityData()",al=="city"?"district":"city",{code:E(this).children("span").text()},false)}var au=E(this).text().replace(E(this).children("span").text(),"");if(ap=="authprovice"){D.proviceName=au;document.title=au;App.setTitle(au)}else{if(ap=="authcity"){D.cityName=au;document.title=D.proviceName+au;App.setTitle(D.proviceName+au)}else{D.districtName=au;document.title=D.proviceName+D.cityName+au;App.setTitle(D.proviceName+D.cityName+au)}}if(ap=="authdistrict"){P=E(this).children("span").text()}console.log("areaNo===================================="+U);E(this).css({background:"#0A3350",color:"#FFF"});E(this).siblings().css({background:"#ECECEC",color:"#000"});console.log("地区选择"+U+"  || "+D.proviceName+"-"+D.cityName+"-"+D.districtName)});if(ap=="authprovice"){d.toNextPage("authselectdizPage");E("#authcity").html("");E("#authdistrict").html("")}}var s;E("#confirmCity").click(function(){console.log("areaNo1===================================="+U);if(!P){Toast.makeText("请选择完整的地区！",LENGTHLONG);return}U=P;console.log("areaNo2===================================="+U);E("#"+s).val(D.proviceName+"-"+D.cityName+"-"+D.districtName);d.back()});E("#authshanghumShow").off("click");E("#authshanghumShow").on("click",function(){E("#merchantName").val("");E("#id_clearmerchantName").hide();d.toNextPage("merchantNamePage")});function t(){E("#applicantName").val("");E("#id_clearapplicantName").hide();if(SHOPTYPE_Z=="01"){d.toNextPage("applicantNamePage")}}E("#confirmMerchantName").click(function(){d.notEmptyVail("authshanghum",ERROR.authShangHuNameEmptyError,"merchantName");var am=document.getElementById("authshanghum").scrollWidth;var al=document.getElementById("authshanghum").clientWidth;if(am>al){E("#id_showauthshanghum").show()}else{E("#id_showauthshanghum").hide()}});E("#confirmApplicantName").click(function(){d.notEmptyVail("authapplyname",ERROR.authapplyNameEmptyError,"applicantName");var am=document.getElementById("authapplyname").scrollWidth;var al=document.getElementById("authapplyname").clientWidth;if(am>al){E("#id_authapplyname").show()}else{E("#id_authapplyname").hide()}});function c(al){if(al=="0"){console.log(" 个体------------------ ");E("#geRen").show();E("#qiYe").hide();E("#yuangong").hide();E("#autoNextTwoButton").show();E("#qiyeRenZhengConfirm").hide();E("#yuangongConfirm").hide()}else{if(al=="1"){console.log(" 企业------------------ ");E("#geRen").hide();E("#qiYe").show();E("#yuangong").hide();E("#autoNextTwoButton").hide();E("#qiyeRenZhengConfirm").show();E("#yuangongConfirm").hide()}else{if(al=="2"){console.log(" 员工------------------ ");E("#geRen").hide();E("#qiYe").hide();E("#yuangong").show();E("#autoNextTwoButton").hide();E("#qiyeRenZhengConfirm").hide();E("#yuangongConfirm").show()}}}}E("#showSelectProfession").click(function(){var am=E("#ahthHangYe").val();var an=E("#professionItems").children("[class=authBorder]");for(var al=0;al<an.length;al++){E(E(an[al]).children().children("img")).attr("src","images/btn_radio_off_pressed.png");if(E(an[al]).text().trim()==am){E(E(an[al]).children().children("img")).attr("src","images/btn_radio_on.png")}}d.toNextPage("auth_profession")});E("#showShoptype").click(function(){var an=E("#shoptype").val();var am=E("#haveLicenseItems").children("[class=authBorder]");for(var al=0;al<am.length;al++){E(E(am[al]).children().children("img")).attr("src","images/btn_radio_off_pressed.png");if(E(am[al]).text().trim()==an){E(E(am[al]).children().children("img")).attr("src","images/btn_radio_on.png")}}d.toNextPage("haveLicense")});E("#set321").on("click",is3to1.showAlertBox);E("#alert_3to1_yes").on("click",function(){is3to1.is321();is3to1.hideAlertBox();if(!Y){K=true}});E("#alert_3to1_no").on("click",function(){is3to1.not321();is3to1.hideAlertBox();if(!Y){K=false}});function e(){console.log("个人认证开头＝＝＝＝＝");if(SHOPTYPE_Z=="02"){if(!d.conditionNotEmptyVail("image14LogId","请上传商铺照片")){return}}else{if(SHOPTYPE_Z=="01"){if(!d.conditionNotEmptyVail("image11LogId","请上传营业执照")){return}}}if(!d.conditionNotEmptyVail("image1LogId","请上传经营者手持身份证正面")){return}else{if(!d.conditionNotEmptyVail("image13LogId","请上传经营者身份证正面")){return}else{if(!d.conditionNotEmptyVail("image2LogId","请输入经营者身份证反面")){return}else{console.log("个人认证开头222＝＝＝＝＝");if(h==1&&ac==0){console.log("ornotagreement=="+h+"==agreement=="+ac);Toast.makeText("请同意勾选协议",null);return}console.log("个人认证开头＝＝＝＝＝333");var an=E("#authshanghum").val();var aw=E("#authIdNo").val();var ao=E("#authapplyname").val();var at=U;var al=E("#ahthHangYeId").val();if(SHOPTYPE_Z=="01"){licence=E("#authyingyezhizhhm").val()}else{if(SHOPTYPE_Z=="02"){licence="000000000000000"}}console.log("licence====================="+licence);var ar;if(SHOPTYPE_Z=="01"){ar=E("#image11LogId").text()}else{if(SHOPTYPE_Z=="02"){ar=E("#image14LogId").text()}}var av=E("#authdizhi").val();var au=E("#authemail").val();if(au==""){au=E("#authemail").attr("hide_date")}if(aw==""){aw=E("#authIdNo").attr("hide_date")}if(av==""){av=E("#authdizhi").attr("hide_date")}console.log("licenceId ================="+ar);var ax=E("#image13LogId").text();var ap=E("#image2LogId").text();var am=E("#image1LogId").text();console.log("个人认证开头＝＝＝＝＝4444");var aq={regType:"PRT1001",prtnName:an,applyer:ao,appCertNo:aw,appCertNoId:ax,appCertNoRvId:ap,areaCode:at,trade:al,licence:licence,licenceId:ar,address:av,email:au,orgCode:"",orgCodeId:"",reveNbr:"",revenbrId:"",legal:"",legalCertNo:"",legalCertNoId:"",legalCertNoRvId:"",appCertNoHandId:am,openFlag:ac,authType:"",agentCode:""};S(aq)}}}}function l(){if(K){if(!d.conditionNotEmptyVail("image12LogId","请上传三证合一")){return}}else{if(!d.conditionNotEmptyVail("imageLogId","请上传营业执照")){return}else{if(!d.conditionNotEmptyVail("image3LogId","请上传组织机构代码证")){return}else{if(!d.conditionNotEmptyVail("image4LogId","请上传税务登记证")){return}}}}if(d.conditionNotEmptyVail("image5LogId","请上传法人身份证正面")&&d.conditionNotEmptyVail("image6LogId","请上传法人身份证反面")&&d.conditionNotEmptyVail("image10LogId","请上传代理人身份证正面")&&d.conditionNotEmptyVail("image8LogId","请上传代理人身份证反面")&&d.conditionNotEmptyVail("image7LogId","请上传代理人手持身份证正面")){var aw=E("#authshanghum").val();var al=E("#authIdNo").val();var az=E("#authapplyname").val();var am=U;var ao=E("#ahthHangYeId").val();var at=E("#authyingyezhizhhm").val();var ar=E("#authdizhi").val();var aA=E("#authemail").val();var ay=E("#imageLogId").text();var aB=E("#image3LogId").text();var au=E("#image4LogId").text();var aC=E("#image5LogId").text();var ax=E("#image6LogId").text();var ap=E("#image10LogId").text();var av=E("#image8LogId").text();var an=E("#image7LogId").text();var aD="";if(aA==""){aA=E("#authemail").attr("hide_date")}if(al==""){al=E("#authIdNo").attr("hide_date")}if(ar==""){ar=E("#authdizhi").attr("hide_date")}var aq={regType:"PRT1002",prtnName:aw,applyer:az,appCertNo:al,appCertNoId:ap,appCertNoRvId:av,areaCode:am,trade:ao,licence:at,licenceId:ay,address:ar,email:aA,orgCode:"",orgCodeId:aB,reveNbr:"",revenbrId:au,legal:"",legalCertNo:aD,legalCertNoId:aC,legalCertNoRvId:ax,appCertNoHandId:an,openFlag:"",authType:"",agentCode:""};S(aq)}}function r(){if(!d.conditionNotEmptyVail("image15LogId","请上传工作证明")){return}else{if(!d.conditionNotEmptyVail("image16LogId","请上传手持身份证正面")){return}else{if(!d.conditionNotEmptyVail("image17LogId","请上传身份证正面")){return}else{if(!d.conditionNotEmptyVail("image18LogId","请上传身份证反面")){return}}}}var at=E("#authapplyname").val();var aq=E("#authemail").val();var al=E("#authIdNo").val();if(aq==""){aq=E("#authemail").attr("hide_date")}if(al==""){al=E("#authIdNo").attr("hide_date")}var ar=E("#image15LogId").text();var ao=E("#image16LogId").text();var an=E("#image17LogId").text();var ap=E("#image18LogId").text();var am={regType:"PRT1001",prtnName:"0",applyer:at,appCertNo:al,appCertNoId:an,appCertNoRvId:ap,areaCode:"0",trade:"0",licence:"",licenceId:ar,address:"0",email:aq,orgCode:"",orgCodeId:"",reveNbr:"",revenbrId:"",legal:"",legalCertNo:"",legalCertNoId:"",legalCertNoRvId:"",appCertNoHandId:ao,openFlag:ac,authType:"01",agentCode:g};console.log("员工认证出参== "+JSON.stringify(am));S(am)}function S(am){am.custCode=A;am.staffCode=J;am.channelCode="20";am.bisChannel=bisChannel;am.clientVersion=deviceInfo.clientVersion;am.softwareType=deviceInfo.systemType;am.merId=q;am.tmnNum="440106003094";am.keep=d.getKeep();am.shopType=SHOPTYPE_Z;am.threeInOne=K?1:0;am.authChannel="A01";am.appCertNoEffSD=aj;am.appCertNoEffED=y;am.legalCertNoEffSD=u;am.legalCertNoEffED=af;am.legalAddress=ai;d.getDeviceInfo(am);var an=Security.getSign(am);am.sign=an;am.signVer="2";console.log("info:Method:MAut101 入参 -->"+JSON.stringify(am));d.showDialog("信息提交中，请稍等..");var al=function(ap){console.log("info:Method:MAut101  出参： Result --> "+JSON.stringify(ap));d.dismissDialog();if(ap.code==TOKENLOST){var ao=function(){User.login(ad)};d.alert("亲,为了您的账户安全，请您重新登录。",ao);return}else{if(ap.code!="000000"){if(ap.code=="011053"){return}else{d.alert("亲,提交失败，"+ap.content)}return}else{d.alert("提交成功，工作人员将在1个工作日内完成认证，请静候",function(){App.exitApp()});return}}};d.sendPostRequest(URL+Method.MAut101,am,al)}function aa(){d.showDialog("正在查询你的信息，请稍等..");var am={staffCode:J,channelCode:"20",custCode:A,merId:q,tmnNum:"440106014113",bisChannel:bisChannel,keep:d.getKeep()};d.getDeviceInfo(am);var al=Security.getSign(am);am.sign=al;am.signVer="2";console.log("SAut102   入参："+JSON.stringify(am));var an=function(aQ){console.log("merchantType==="+B);console.log("SAut102   出参："+JSON.stringify(aQ));d.dismissDialog();if(aQ.code=="000000"){var aM=aQ.regType;var aT=aQ.prtnName;var aD=aQ.applyer;var ar=aQ.appCertNo;var ao=aQ.appCertNoId;var aS=aQ.appCertNoRvId;var av=aQ.appCertNoHandId;var ay=aQ.trade;var aJ=aQ.tradeName;var aR=aQ.licence;var aB=aQ.licenceId;var aq=aQ.address;var at=aQ.email;var ap=aQ.orgCode;var az=aQ.orgCodeId;var ax=aQ.reveNbr;var au=aQ.revenbrId;var aC=aQ.legal;var aL=aQ.legalCertNo;var aH=aQ.legalCertNoId;var aA=aQ.legalCertNoRvId;var aG=aQ.noAuth;I=aQ.authStat;var aK=aQ.authStat;var aP=aQ.agentCode;aT=aQ.prtnName;n=aQ.authChannel;a=aQ.authApplyer;N=aQ.authAppCertNo;aj=aQ.appCertNoEffSD;y=aQ.appCertNoEffED;Q=aQ.authLegal;w=aQ.authLegalCertNo;u=aQ.legalCertNoEffSD;af=aQ.legalCertNoEffED;ai=aQ.legalAddress;if(aQ.code==TOKENLOST){var aw=function(){User.login(ad)};d.alert("⊙_⊙,为了您的账户安全，请您重新登录。",aw);return}else{if(aQ.code!="000000"){d.alert("亲,获取您的基本信息失败，"+aQ.content);return}}console.log("bankMode==="+V);console.log("useInfoIOS.regType==="+useInfoIOS.regType);console.log("typeof regType==="+typeof useInfoIOS.regType);console.log("productType==="+ag);console.log("hadEptinfo==="+x);console.log("typeof hadEptinfo==="+typeof x);if(useInfoIOS.regType!=="1"){if(ag=="2"){if((V=="BT1001"||V=="BT1013")&&x!="1"){E("#kaotong_agreement").show()}else{E("#kaotong_agreement").hide()}}else{E("#kaotong_agreement").hide()}}else{E("#kaotong_agreement").hide()}if(aQ.authStat=="A00"){var aw=function(){d.back()};d.alert("您的认证信息还在审核中，请耐心等候... ...",aw);return}else{if(aQ.authStat=="A01"){}else{if(aQ.authStat=="A02"||aQ.authStat=="A99"){console.log("已经认证了");console.log("merchantType==="+B);console.log("params.authStat=="+aQ.authStat);console.log("hadEptinfo==="+x);if(aQ.authStat=="A02"&&x=="1"){console.log("已经认证和开通添益宝了-------");E("#showapplicantname").unbind();E("#showapplicantname_bggray").addClass("gray_bg");E("#showapplicantname_bggray #authapplyname").addClass("gray_bg");E("#authIdNo").attr("readonly","true");E("#show_creditcard").addClass("gray_bg");E("#show_creditcard #authIdNo").addClass("gray_bg");E("[name = merchantTypeChoose]").unbind();console.log("已经认证和开通222222222添益宝了-------")}}else{if(aQ.authStat=="A03"){var aw=function(){d.back()};d.alert("您已经认证...",aw);return}}}}E("#authshanghum").val(aT);console.log("merchantType= "+B);console.log("merchantType= "+typeof B);if(B==="0"||B==="1"){console.log("setpe111111111111111111111111111111111");console.log("merchantType= "+B);d.dismissDialog();console.log("Utils.pageIds111111111111==="+JSON.stringify(d.pageIds));d.toNextPage("authorityPage");if(aQ.authStat=="A02"&&x=="1"){d.pageIds.shift()}}else{if(B==="2"){console.log("merchantType ========================== "+B);console.log("prtnName ======================== "+aT);if(!aP){d.toNextPage("company_code");d.dismissDialog();if(j.worker_recetification==="worker"){d.pageIds.shift()}}else{console.log("agentCode====================="+aP);g=aP;k()}}}if(aT!=""){E("#noneImg_hum").hide();E("#okImg_hum").show()}E("#authapplyname").val(aD);if(aD!=""){E("#noneImg_name").hide();E("#okImg_name").show()}E("#authIdNo").attr("hide_date",ar);E("#authIdNo").val(ar);U=aQ.areaCode;var aF={code:U};var aO=DB_Data.getProCityDistric(U);E("#authareas").val(aO.ProvinceName+"-"+aO.CityName+"-"+aO.CountyName);if(aq!=""&&aq!=null&&aq!="null"){E("#authdizhi").attr("hide_date",aq).val(aq)}if(at!=""&&at!=null&&at!="null"){E("#authemail").attr("hide_date",at).val(at)}E("#ahthHangYe").val(E("#"+ay).text());E("#ahthHangYeId").val(ay);if(aR=="000000000000000"){E("#licenceNomber").hide();SHOPTYPE_Z="02";E("#shoptype").val("无营业执照");E("#licencePIC").hide();E("#shopPIC").show()}else{E("#authyingyezhizhhm").val(aR)}if(aK=="A01"){d.dismissDialog();return}console.log("licenceId=================="+aB);console.log("appCertNoId=================="+ao);if(aB!=""){E("#image11LogId").text(aB);aI("11")}if(ao!=""){E("#image13LogId").text(ao);aI("13")}if(av!=""){E("#image1LogId").text(av);aI("1")}if(aS!=""){E("#image2LogId").text(aS);aI("2")}if(av!=""){E("#image7LogId").text(av);aI("7")}if(aS!=""){E("#image8LogId").text(aS);aI("8")}if(ao!=""){E("#image10LogId").text(ao);aI("10")}if(aM=="PRT1001"){}else{if(aM=="PRT1002"){if(aB!=""){E("#imageLogId").text(aB);E("#okImg").show();E("#noneImg").hide()}if(az!=""){E("#image3LogId").text(az);aI("3")}if(au!=""){E("#image4LogId").text(au);aI("4")}if(aH!=""){E("#image5LogId").text(aH);aI("5")}if(aA!=""){E("#image6LogId").text(aA);aI("6")}}}function aI(aU){E("#okImg"+aU).show();E("#noneImg"+aU).hide()}function aE(aU){console.log("------------"+aU);if(aU!="企业商户"){E("#oneMerchantTypeDiv div:first").click()}else{E("#authorityNextStepBtn").click()}}function aN(aU,aV){console.log("显示图片！！");var aW={LOGID:E("#"+aU+"LogId").text(),TYPE:aV};console.log("   入参："+JSON.stringify(aW));Scanner.handlerVerifyPhoto(aW,function(aX){var aY=JSON.stringify(aX);aY=aY.substring(1,aY.length-1);E("#"+aU+"LogId").text(aY)},function(){Toast.makeText("取消上传！",LENGTHLONG)})}}else{}};d.sendPostRequest(URL+Method.SAut102,am,an)}function Z(){var al={bisChannel:bisChannel,channelCode:"20",clientVersion:deviceInfo.clientVersion,imei:"",imsi:"",keep:d.getKeep(),merId:q,model:"MRdc001",signVer:"2",softwareType:"8.1",tmnNum:"440106003094",vender:"Android"};var am=function(an){alert(JSON.stringify(JSON.stringify(an)));d.dismissMDialog("ch_dialog")};d.sendPostRequest(URL+Method.MRdcMake,al,am,null,"ch_alert","chalertmsg","chAlertBtn","ch_dialog")}});function selectProfession(b,a){$("#ahthHangYeId").val(b);$("#ahthHangYe").val(a);Utils.back()}function selectShoptype(b,a){console.log("id=----------------------"+b);if(b==="02"){$("#licenceNomber").hide();$("#licencePIC").hide();$("#shopPIC").show();$("#merchantNameInfo_img").show();$("#merchantNameInfo").show();$("#merchantNameInfo2_img").hide();$("#merchantNameInfo2").hide();SHOPTYPE_Z="02";console.log("SHOPTYPE_Z----------------------"+SHOPTYPE_Z)}else{if(b==="01"){$("#licenceNomber").show();$("#licencePIC").show();$("#shopPIC").hide();$("#merchantNameInfo_img").hide();$("#merchantNameInfo").hide();$("#merchantNameInfo2_img").show();$("#merchantNameInfo2").show();SHOPTYPE_Z="01";console.log("SHOPTYPE_Z++++++++------------------"+SHOPTYPE_Z)}}$("#shoptypeId").val(b);$("#shoptype").val(a);Utils.back()}function verifyFocus(a){$("#"+a).focus()}var is3to1={alertBoxID:$("#alert_3to1"),Item_is321_ID:$("#ture_321"),Item_not321_ID:$("#false_321"),field:$("#set321_val"),showAlertBox:function(){$("#alert_3to1").show();show321=true},hideAlertBox:function(){this.alertBoxID.hide();show321=false},is321:function(){this.Item_is321_ID.show();this.Item_not321_ID.hide();this.field.text("是")},not321:function(){this.Item_is321_ID.hide();this.Item_not321_ID.show();this.field.text("否")}};