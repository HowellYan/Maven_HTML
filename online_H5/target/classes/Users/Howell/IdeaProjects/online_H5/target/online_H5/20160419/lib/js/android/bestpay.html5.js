define(function(){var w;var l={keyStr:"",keyInputId:"",initPwdId:function(D,C,E){l.keyStr="";l.keyInputId=D;l.maxLength=E;l.inputCallback=C;$("#"+D).blur(function(){l.hideKeyboard()})},initPwdUI3:function(C){l.inputCallback=C},popPswKeyboard:function(){console.log("----------------------------popPswKeyboard:");return q("PasswordKeyBoard","popPswKeyboard",null)},hideKeyboard:function(){return q("PasswordKeyBoard","hideKeyboard",null)},popKeyboardUI3:function(){return q("PasswordKeyBoard","showPwd",null)},hideKeyboardUI3:function(){if(!!config.payingBack){config.payingBack=false}return q("PasswordKeyBoard","hidPwd",null)},pswInputStr:function(E){var D="";for(var C=0;C<l.keyStr.length;C++){if(C==l.keyStr.length-1&&E){clearTimeout(w);D+=l.keyStr.charAt(C);$("#"+l.keyInputId).val(D);w=setTimeout(function(){D=D.substring(0,D.length-1);D+="●";$("#"+l.keyInputId).val(D)},500)}else{D+="●"}}$("#"+l.keyInputId).val(D);l.inputCallback(l.keyStr)},returnkey:function i(C){if(l.maxLength!=null&&l.keyStr.length>=l.maxLength){return}l.inputCallback(C)},deleteKey:function h(){l.keyStr=l.keyStr.substr(0,l.keyStr.length-1);l.pswInputStr(false)}};var B={keyNum:"",keyInputId:"",initPwdId:function(D,C,F,E,G,H){B.keyInputId=D;$("#"+B.keyInputId).attr("readonly","readonly");B.keyNum=$("#"+B.keyInputId).val();B.inputCallback=C;B.backspaceCallback=F;B.maxLength=E;B.isDefault=H;B.closeDot=G},InitnumKeyboard:function(){q("NumberKeyBoard","InitnumKeyboard",null);$("#"+B.keyInputId).focus()},HidenumKeyboard:function(){return q("NumberKeyBoard","HidenumKeyboard",null)},DefaultInputStr:function(C){if(B.isDefault==null||B.isDefault==""||B.isDefault==true){$("#"+B.keyInputId).val(C)}},returnNum:function z(C){console.log("returnNum:"+C);B.keyNum+=(""+C);B.DefaultInputStr(B.keyNum);if(B.inputCallback!=null&&B.inputCallback!=""){B.inputCallback(B.keyNum,C)}console.log("len=="+$("#"+B.keyInputId).val().length);if(!!B.maxLength){B.keyNum=B.keyNum.substr(0,B.maxLength)}if(!!B.closeDot){B.keyNum=B.keyNum.replace(/\./g,"")}},deleteNum:function s(C){console.log("deleteNum:");B.keyNum=B.keyNum.substr(0,B.keyNum.length-1);B.DefaultInputStr(B.keyNum);if(!!B.maxLength){B.keyNum=B.keyNum.substr(0,B.maxLength)}if(B.backspaceCallback!=null&&B.backspaceCallback!=""){B.backspaceCallback(B.keyNum,C)}}};var x={pay:function(C,D,E){var F={params:C};return a("Payment","pay",JSON.stringify(F),D,E)},recharge:function(C,F,D,E){var G={productNo:C,location:F};return a("Payment","recharge",JSON.stringify(G),D,E)}};var v={scan:function(C,D,E){var F={params:C};return a("Scanner","scan",JSON.stringify(F),D,E)},handlerVerifyPhoto:function(C,D,E){return a("Scanner","handlerVerifyPhoto",JSON.stringify(C),D,E)},handlerPreviewPhoto:function(C,D,E){return q("Scanner","handlerPreviewPhoto",JSON.stringify(C),D,E)},getBarCode:function(D,C){return a("Scanner","oalWaterScan",JSON.stringify({}),D,C)}};var e={getProduct:function(){return q("User","getProduct",null)},getLocation:function(){return q("User","getLocation",null)},getSuccessLoginInfo:function(){return q("User","getSuccessLoginInfo",null)},login:function(C){return q("User","login",null)}};var t={exitCompleteApp:function(){q("App","exitCompleteApp",null)},setThresholdBtnIsVisable:function(C){var D={isvisable:C};console.log("app--------------->"+JSON.stringify(D));q("App","setThresholdBtnIsVisable",JSON.stringify(D))},jumpToRecertify:function(){var C={comefrom:"tianyibao"};a("App","jumpToRecertify",JSON.stringify(C))},jumpToBindCard:function(C){var D={comefrom:"tianyibao"};a("App","jumpToBindCard",JSON.stringify(D),C)},jumpToUnBindCard:function(){var C={comefrom:"tianyibao"};a("App","jumpToUnBindCard",JSON.stringify(C))},getAppId:function(){return q("App","getAppId",null)},jumpToNewH5View:function(E,D){var C={url:E};a("App","jumpToNewH5View",JSON.stringify(C),null,D)},jumpToNewTianyibao:function(){var C={};q("App","jumpToNewTianyibao",JSON.stringify(C))},updateTybRereshFlag:function(){var C={tybRefreshFlag:"1"};q("App","updateTybRereshFlag",JSON.stringify(C))},setFinishIcon:function(){var C={};q("App","setFinishIcon",JSON.stringify(C))},jumpToCustomerService:function(){var C={};q("App","jumpToCustomerService",JSON.stringify(C))},setpopWindwonGone:function(){var C={};q("App","setpopWindwonGone",JSON.stringify(C))},setpopWindwonVisible:function(){var C={};q("App","setpopWindwonVisible",JSON.stringify(C))},autoLogin:function(D){var C={productNo:"",location:""};a("App","autoLogin",JSON.stringify(C),D)},getSessionKey:function(){return q("App","getSessionKey",null)},getVersion:function(){return q("App","getVersion",null)},getHome:function(){return q("App","getHome",null)},getSecurityKey:function(){return q("App","getSecurityKey",null)},overrideBackPressed:function(D){var C={bound:D};return q("App","overrideBackPressed",JSON.stringify(C))},exitApp:function(){return q("App","exitApp",null)},setKeyEventListener:function(C){t.listener=C},onKeyEvent:function(C){if(typeof t.listener=="function"){t.listener(C)}},setTitle:function(D){var C={title:D};q("App","setTitle",JSON.stringify(C))},setTitleBackgroundColor:function(C){var D={color:C};q("App","setTitleBackground",JSON.stringify(D))},setTitleBackgroundPath:function(D){var C={path:D};q("App","setTitleBackground",JSON.stringify(C))},updateUserInfo:function(D){var C={bindCard:D};return q("App","updateUserInfo",JSON.stringify(C))},getScreen:function(){return q("App","getScreen",null)},showRightButton:function(E,D){var C={caption:E,callback:D};q("App","showRightButton",JSON.stringify(C))},hideRightButton:function(){q("App","hideRightButton","{}")},jumpToRealnameVerify:function(){q("App","jumpToRealnameVerify","{}")},jumpToAccountRecharge:function(C,E,D){var F={productNo:C,location:E};a("App","jumpToAccountRecharge",JSON.stringify(F),D)},execWhenReturnAndAppear:function(D){var C={execWhenReturnAndAppearJSFunc:D};a("App","execWhenReturnAndAppear",C)},jumpToNativeView:function(C,F,D,E){if(typeof F=="undefined"){F={}}var G=F;G.viewName=C;a("App","jumpToNativeView",JSON.stringify(G),D,E)},getDeviceInfo:function(){return q("App","getDeviceInfo",null)},queryBalance:function(){q("App","queryBalance","{}")},updateTybOpenStat:function(C){q("App","updateTybOpenStat",C)},jumpToMain:function(){console.log("---- js bridge jump to main");q("App","jumpToMain","{}")},goBalanQuery:function(){var C={};return q("App","goBalanQuery",JSON.stringify(C))}};var A={base64Encode:function(E){if(typeof(E)=="undefined"||typeof(E)!="object"){return false}else{var D={};var C="";C=q("UtilPlugin","base64Encode",JSON.stringify(E));D=JSON.parse(C);return D}},base64Decode:function(E){if(typeof(E)=="undefined"||typeof(E)!="object"){return false}else{var D={};var C="";C=q("UtilPlugin","base64Decode",JSON.stringify(E));D=JSON.parse(C);return D}}};var n={put:function(C,D,F){console.log("put-key:"+C+" value:"+D+" prefname:"+F);var E={key:C,value:D,prefname:F};q("Preference","put",JSON.stringify(E))},get:function(C,D,F){console.log("get-key:"+C+" defValue:"+D+" prefname:"+F);var E={key:C,defValue:D,prefname:F};return q("Preference","get",JSON.stringify(E))},putWithApp:function(C,D,E){this.put(C,D,E)},getWithApp:function(C,D,E){return this.get(C,D,E)}};var o={execSQL:function(G,D,C){var F={dbName:G,sql:D,params:C};var E=q("Storage","exeSQL",JSON.stringify(F));return E},createDatabase:function(D,C,G,E){var F={dbName:D,createSQL:C,upgradSQL:G,version:E};return q("Storage","createDatabase",JSON.stringify(F))},batchInsert:function(E,C,G,D){var F={dbName:E,tableName:C,columns:G,data:D};return q("Storage","batchInsert",JSON.stringify(F))}};var g={getCardList:function(){return JSON.parse(q("CardList","queryAll",null))},getProCityDistric:function(D){var C={code:D};return JSON.parse(q("AreaManagerPlugin","getProCityDistricName",JSON.stringify(C)))},getActionCode:function(C,E){var D=null;if(E!=null){D=E}return JSON.parse(q("AreaManagerPlugin",C,D))},getTrafficProvinces:function(){var C=null;return JSON.parse(q("TrafficAreaList","getTrafficProvinces",C))},getTrafficCitiesByProvinceId:function(C){var D={code:C};return JSON.parse(q("TrafficAreaList","getTrafficCitiesByProvinceId",JSON.stringify(D)))}};var c={SERVICE:"File",copy:function(C,D){var F={path:C,newpath:D};var E=JSON.stringify(F);return q(c.SERVICE,"copy",E)},exists:function(D){var C={file_path:D};var E=JSON.stringify(C);return q(c.SERVICE,"exists",E)},remove:function(D){var C={path:D};return q(c.SERVICE,"remove",JSON.stringify(C))}};var p={};var f={showSingleChoiceDialog:function(C,H,G,F,D){var E={title:C,list:H,checkedItem:G,displayKey:F};return a("Dialog","showSingleChoiceDialog",JSON.stringify(E),D,null)},showSwitchDialog:function(C,H,G,E,D){var F={title:C,message:H,postext:G,negtext:E};return a("Dialog","showSwitchDialog",JSON.stringify(F),D,null)},showWaitDialog:function(D,C){var E={title:D,msg:C};return q("Dialog","showWaitDialog",JSON.stringify(E))},dismissDialog:function(D){var C={id:D};return q("Dialog","dismissDialog",JSON.stringify(C))},showProgressDialog:function(D,C){var E={title:D,msg:C};return q("Dialog","showProgressDialog",JSON.stringify(E))},showDateChoiceDialog:function(E,D){var C={date:E};return a("Dialog","showDateChoiceDialog",JSON.stringify(C),D,null)},jumpToAuthorityDialog:function(){return q("Dialog","jumpToAuthorityDialog",null)},alert:function(C){window.alert(C)},showAlertDialog:function(C,H,F,G,D){dismissDialog();var E={title:C,code:G,btn:F};E.content=H;if(H==null||H=="null"||H==""){E.content="未知错误"}a("Dialog","showAlertDialog",JSON.stringify(E),D)},showAlertTwoBtnDialog:function(C,H,F,I,G,D){dismissDialog();var E={title:C,code:G,content:H,okBtn:F,cancelBtn:I};a("Dialog","showAlertTwoBtnDialog",JSON.stringify(E),D)},showAlertSynchroDialog:function(C,G,F,H,D){dismissDialog();var E={title:C,content:G,btn:F,TRADE_LIST_QUERY_TYPE:H,TRADE_LIST_QUERY_NUMBER:D};q("Dialog","showAlertSynchroDialog",JSON.stringify(E))},jumpToOrderQuery:function(C,G,F,H,D){dismissDialog();var E={title:C,content:G,btn:F,TRADE_LIST_QUERY_TYPE:H,TRADE_LIST_QUERY_NUMBER:D};q("App","jumpToOrderQuery",JSON.stringify(E))}};var r={LENGTH_LONG:1,LENGTH_SHORT:0,makeText:function(D,C){var E={text:D,duration:C};q("Toast","makeText",JSON.stringify(E))}};var b={openContacts:function(D,C){a("Contacts","openContacts","{}",D,C)},tel:function(C){var D={tel:C};return q("Contacts","call",JSON.stringify(D))}};var m={digest:function(E,D){var C={algorithm:E,source:D};return q("MessageDigest","digest",JSON.stringify(C))}};var d={getSign:function(C){return q("Security","getSign",JSON.stringify(C))},getSignINF:function(C){return q("Security","getSignINF",JSON.stringify(C))},encrypt:function(D){var C={source:D};return q("Security","encrypt",JSON.stringify(C))},decrypt:function(D){var C={encryptedData:D};return q("Security","decrypt",JSON.stringify(C))},pinkeyEncrypt:function(D,C){var E={source:D,salt:C};return q("Security","pinkeyEncrypt",JSON.stringify(E))},encryptPassword:function(C,D,F){var E={account:C,password:D,encrypRandNumber:F};return q("Security","encryptPassword",JSON.stringify(E))},verifyCodeEncrypt:function(D){var C={verifyCode:D};return q("App","verifyCodeEncrypt",JSON.stringify(C))},verifySign:function(C){var D={response:'"'+JSON.stringify(C)+'"'};return q("Security","verifySign",JSON.stringify(D))}};var j={onEventWithLabel:function(D,C){var E={eventId:D,eventLabel:C};return q("TalkingData","trackEventWithLabel",JSON.stringify(E))}};var u=function(E,C,H,G,D,F){if(G){return q(E,C,H)}else{q(E,C,H,D,F)}};var y={idCounter:0,INPUT_CMDS:"",INPUT_ARGS:"",OUTPUT_RESULTS:"",CALLBACK_SUCCESS:function(C){console.log(C);return},CALLBACK_FAIL:function(C){console.log(C);return},callNative:function(D,E){this.INPUT_CMDS=D;this.INPUT_ARGS=E;var F="ID_"+(++this.idCounter);window.nintf.setCmds(this.getInputCmd(),F);window.nintf.setArgs(this.getInputArgs(),F);var C=document.createElement("IFRAME");C.setAttribute("src","bestpayhtml://ready?id="+F);document.documentElement.appendChild(C);C.parentNode.removeChild(C);C=null;console.log(2);console.log("return this.OUTPUT_RESULTS:"+this.OUTPUT_RESULTS);return this.OUTPUT_RESULTS},getInputCmd:function(){return JSON.stringify(this.INPUT_CMDS)},getInputArgs:function(){return this.INPUT_ARGS},callBackJs:function(E){this.OUTPUT_RESULTS=E;console.log(1);var D=JSON.parse(E);var C=D.message;console.log("message:"+C);var F=D.status;if(F==0){if(typeof this.CALLBACK_SUCCESS!="undefined"){setTimeout("BestpayHtml5.CALLBACK_SUCCESS('"+C+"')",0)}}else{if(typeof this.CALLBACK_FAIL!="undefined"){setTimeout("BestpayHtml5.CALLBACK_FAIL('"+C+"')",0)}}console.log("你先:("+(y.idCounter)+")"+E)}};var q=function(D,K,F){var G={service:D,action:K};var J=prompt(JSON.stringify(G),F);var I;try{I=JSON.parse(J)}catch(E){console.error(E.message)}var C=I.status;var H=I.message;if(C==0){return H}else{console.error("service:"+D+" action:"+K+" error:"+H)}};var k;var a=function(F,C,H,D,G){var I={service:F,action:C};if(typeof G!="success"){y.CALLBACK_SUCCESS=D}if(typeof G!="undefined"){y.CALLBACK_FAIL=G}else{y.CALLBACK_FAIL=function(){}}var E=y.callNative(I,H);console.log("我先:("+(y.idCounter)+")"+E)};return{Dialog:f,App:t,exec_asyn:a,exec:q,TalkingData:j,Preference:n,Contacts:b,User:e,Toast:r,DB_Data:g,BestpayHtml5:y,Storage:o,Security:d,PasswordKeyBoard:l,NumberKeyBoard:B,Scanner:v}});