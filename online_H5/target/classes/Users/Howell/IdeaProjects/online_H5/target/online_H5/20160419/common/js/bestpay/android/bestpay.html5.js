define(function(){var w;var y={keyStr:"",keyInputId:"",initPwdId:function(A){y.keyStr="";y.keyInputId=A;$("#"+A).val("");$_id(A).onblur=function(){y.hideKeyboard()};$("#"+A).css("font-size","18px")},popPswKeyboard:function(){return r("PasswordKeyBoard","popPswKeyboard",null)},hideKeyboard:function(){return r("PasswordKeyBoard","hideKeyboard",null)},initPwdUI3:function(A){y.inputCallback=A},popKeyboardUI3:function(){return r("PasswordKeyBoard","showPwd",null)},hideKeyboardUI3:function(){return r("PasswordKeyBoard","hidPwd",null)},pswInputStr:function j(B){var A="";for(var C=0;C<y.keyStr.length;C++){if(C==y.keyStr.length-1&&B){clearTimeout(w);A+=y.keyStr.charAt(C);$("#"+y.keyInputId).val(A);w=setTimeout(function(){A=A.substring(0,A.length-1);A+="●";$("#"+y.keyInputId).val(A)},500)}else{A+="●"}}$("#"+y.keyInputId).val(A)},returnkey:function l(A){if(y.keyStr.length>12){return}y.inputCallback(A)},delBtn:function(B){var C=B.val();var A=B[0].parentNode.parentNode;if(A.children[1]=="undefined"||A.children[1]==undefined){return}A.children[1].onclick=function(){y.initPwdId(y.keyInputId);A.children[1].className=A.children[1].className.replace("_1","")};A.children[1].className="del_1";console.log("--------------"+A.children[1].className)},deleteKey:function k(){if(y.keyStr.length>12){y.keyStr=y.keyStr.substr(0,12)}y.keyStr=y.keyStr.substr(0,y.keyStr.length-1);y.pswInputStr(false)}};var x={pay:function(D,A,B){var C={params:D};return c("Payment","pay",JSON.stringify(C),A,B)},recharge:function(E,C,A,B){var D={productNo:E,location:C};return c("Payment","recharge",JSON.stringify(D),A,B)}};var v={scan:function(D,A,B){var C={params:D};return c("Scanner","scan",JSON.stringify(C),A,B)},handlerVerifyPhoto:function(C,A,B){return c("Scanner","handlerVerifyPhoto",JSON.stringify(C),A,B)},handlerPreviewPhoto:function(C,A,B){return r("Scanner","handlerPreviewPhoto",JSON.stringify(C),A,B)},bankOCR:function(A,B){return c("Scanner","bankOCR",JSON.stringify({}),A,B)}};var g={getProduct:function(){return r("User","getProduct",null)},getLocation:function(){return r("User","getLocation",null)},getSuccessLoginInfo:function(){return r("User","getSuccessLoginInfo",null)},login:function(A){return r("User","login",null)}};var t={exitCompleteApp:function(){r("App","exitCompleteApp",null)},setThresholdBtnIsVisable:function(B){var A={isvisable:B};r("App","setThresholdBtnIsVisable",JSON.stringify(A))},exitAppFromBandCard:function(A){var B={event:A};r("App","exitAppFromBandCard",JSON.stringify(B))},jumpToRecertify:function(){var A={comefrom:"tianyibao"};r("App","jumpToRecertify",JSON.stringify(A))},jumpToBindCard:function(){var A={comefrom:"tianyibao"};r("App","jumpToBindCard",JSON.stringify(A))},jumpToUnBindCard:function(){var A={comefrom:"tianyibao"};r("App","jumpToUnBindCard",JSON.stringify(A))},getAppId:function(){return r("App","getAppId",null)},jumpToNewH5View:function(B,A){var C={url:B};c("App","jumpToNewH5View",JSON.stringify(C),A)},jumpToNewTianyibao:function(){var A={};r("App","jumpToNewTianyibao",JSON.stringify(A))},updateTybRereshFlag:function(){var A={tybRefreshFlag:"1"};r("App","updateTybRereshFlag",JSON.stringify(A))},setFinishIcon:function(){var A={};r("App","setFinishIcon",JSON.stringify(A))},setFinishIconHidden:function(){var A={};r("App","setFinishIconHidden",JSON.stringify(A))},autoLogin:function(A){var B={productNo:"",location:""};c("App","autoLogin",JSON.stringify(B),A)},getSessionKey:function(){return r("App","getSessionKey",null)},getVersion:function(){return r("App","getVersion",null)},getHome:function(){return r("App","getHome",null)},getSecurityKey:function(){return r("App","getSecurityKey",null)},updateUserInfo:function(A){var B={bindCard:A};return r("App","updateUserInfo",JSON.stringify(B))},getDeviceInfo:function(){return r("App","getDeviceInfo",null)},overrideBackPressed:function(A){var B={bound:A};return r("App","overrideBackPressed",JSON.stringify(B))},exitApp:function(){return r("App","exitApp",null)},setKeyEventListener:function(A){t.listener=A},onKeyEvent:function(A){if(typeof t.listener=="function"){t.listener(A)}},setTitle:function(A){var B={title:A};r("App","setTitle",JSON.stringify(B))},setTitleBackgroundColor:function(B){var A={color:B};r("App","setTitleBackground",JSON.stringify(A))},setTitleBackgroundPath:function(A){var B={path:A};r("App","setTitleBackground",JSON.stringify(B))},getScreen:function(){return r("App","getScreen",null)},showRightButton:function(B,A){var C={caption:B,callback:A};r("App","showRightButton",JSON.stringify(C))},hideRightButton:function(){r("App","hideRightButton","{}")},jumpToRealnameVerify:function(){r("App","jumpToRealnameVerify","{}")},jumpToAccountRecharge:function(D,B,A){var C={productNo:D,location:B};c("App","jumpToAccountRecharge",JSON.stringify(C),A)},execWhenReturnAndAppear:function(A){var B={execWhenReturnAndAppearJSFunc:A};c("App","execWhenReturnAndAppear",B)},jumpToNativeView:function(E,C,A,B){if(typeof C=="undefined"){C={}}var D=C;D.viewName=E;c("App","jumpToNativeView",JSON.stringify(D),A,B)},jumpToMain:function(){console.log("---- js bridge jump to main");r("App","jumpToMain","{}")},startBangfutongActivity:function(D,A,E,F,B){var C={forwardUrl:D,orderNo:A,bankAcct:E};c("App","startBangfutongActivity",JSON.stringify(C),F,B)},verifyCodeEncrypt:function(A){var B={verifyCode:A};return r("App","verifyCodeEncrypt",JSON.stringify(B))},goBalanQuery:function(){var A={};return r("App","goBalanQuery",JSON.stringify(A))}};var b={base64Encode:function(B){if(typeof(B)=="undefined"||typeof(B)!="object"){return false}else{var A={};var C="";C=r("UtilPlugin","base64Encode",JSON.stringify(B));A=JSON.parse(C);return A}},base64Decode:function(B){if(typeof(B)=="undefined"||typeof(B)!="object"){return false}else{var A={};var C="";C=r("UtilPlugin","base64Decode",JSON.stringify(B));A=JSON.parse(C);return A}}};var p={put:function(D,A,C){console.log("put-key:"+D+" value:"+A+" prefname:"+C);var B={key:D,value:A,prefname:C};r("Preference","put",JSON.stringify(B))},get:function(D,A,C){console.log("get-key:"+D+" defValue:"+A+" prefname:"+C);var B={key:D,defValue:A,prefname:C};return r("Preference","get",JSON.stringify(B))},putWithApp:function(C,A,B){this.put(C,A,B)},getWithApp:function(C,A,B){return this.get(C,A,B)}};var z={execSQL:function(D,A,E){var C={dbName:D,sql:A,params:E};var B=r("Storage","exeSQL",JSON.stringify(C));return B},createDatabase:function(A,E,D,B){var C={dbName:A,createSQL:E,upgradSQL:D,version:B};return r("Storage","createDatabase",JSON.stringify(C))},batchInsert:function(B,E,D,A){var C={dbName:B,tableName:E,columns:D,data:A};return r("Storage","batchInsert",JSON.stringify(C))}};var i={getCardList:function(){return JSON.parse(r("CardList","queryAll",null))},getProCityDistric:function(A){var B={code:A};return JSON.parse(r("AreaManagerPlugin","getProCityDistricName",JSON.stringify(B)))},getActionCode:function(C,B){var A=null;if(B!=null){A=B}return JSON.parse(r("AreaManagerPlugin",C,A))}};var e={SERVICE:"File",copy:function(D,A){var C={path:D,newpath:A};var B=JSON.stringify(C);return r(e.SERVICE,"copy",B)},exists:function(A){var C={file_path:A};var B=JSON.stringify(C);return r(e.SERVICE,"exists",B)},remove:function(A){var B={path:A};return r(e.SERVICE,"remove",JSON.stringify(B))}};var q={};var h={showSingleChoiceDialog:function(F,E,D,C,A){var B={title:F,list:E,checkedItem:D,displayKey:C};return c("Dialog","showSingleChoiceDialog",JSON.stringify(B),A,null)},showSwitchDialog:function(F,E,D,B,A){var C={title:F,message:E,postext:D,negtext:B};return c("Dialog","showSwitchDialog",JSON.stringify(C),A,null)},showWaitDialog:function(A,C){var B={title:A,msg:C};return r("Dialog","showWaitDialog",JSON.stringify(B))},dismissDialog:function(A){var B={id:A};return r("Dialog","dismissDialog",JSON.stringify(B))},showProgressDialog:function(A,C){var B={title:A,msg:C};return r("Dialog","showProgressDialog",JSON.stringify(B))},alert:function(A){window.alert(A)},showAlertDialog:function(F,E,C,D,A){var B={title:F,code:D,content:E,btn:C};c("Dialog","showAlertDialog",JSON.stringify(B),A)},showAlertTwoBtnDialog:function(G,E,C,F,D,A){var B={title:G,code:D,content:E,okBtn:C,cancelBtn:F};c("Dialog","showAlertTwoBtnDialog",JSON.stringify(B),A)},jumpToAuthorityDialog:function(){return r("Dialog","jumpToAuthorityDialog",null)}};var s={LENGTH_LONG:1,LENGTH_SHORT:0,makeText:function(A,C){var B={text:A,duration:C};r("Toast","makeText",JSON.stringify(B))}};var d={openContacts:function(A,B){c("Contacts","openContacts","{}",A,B)},tel:function(B){var A={tel:B};return r("Contacts","call",JSON.stringify(A))}};var o={digest:function(B,A){var C={algorithm:B,source:A};return r("MessageDigest","digest",JSON.stringify(C))}};var f={getSign:function(A){return r("Security","getSign",JSON.stringify(A))},getSignINF:function(A){return r("Security","getSignINF",JSON.stringify(A))},encrypt:function(A){var B={source:A};return r("Security","encrypt",JSON.stringify(B))},decrypt:function(A){var B={encryptedData:A};return r("Security","decrypt",JSON.stringify(B))},pinkeyEncrypt:function(A,C){var B={source:A,salt:C};return r("Security","pinkeyEncrypt",JSON.stringify(B))},encryptPassword:function(D,A,C){var B={account:D,password:A,encrypRandNumber:C};return r("Security","encryptPassword",JSON.stringify(B))},verifySign:function(B){var A={response:'"'+JSON.stringify(B)+'"'};return r("Security","verifySign",JSON.stringify(A))}};var m={onEventWithLabel:function(A,C){var B={eventId:A,eventLabel:C};return r("TalkingData","trackEventWithLabel",JSON.stringify(B))}};var u=function(B,F,E,D,A,C){if(D){return r(B,F,E)}else{r(B,F,E,A,C)}};var a={idCounter:0,INPUT_CMDS:"",INPUT_ARGS:"",OUTPUT_RESULTS:"",CALLBACK_SUCCESS:function(A){console.log(A);return},CALLBACK_FAIL:function(A){console.log(A);return},callNative:function(A,B){this.INPUT_CMDS=A;this.INPUT_ARGS=B;var C="ID_"+(++this.idCounter);window.nintf.setCmds(this.getInputCmd(),C);window.nintf.setArgs(this.getInputArgs(),C);var D=document.createElement("IFRAME");D.setAttribute("src","bestpayhtml://ready?id="+C);document.documentElement.appendChild(D);D.parentNode.removeChild(D);D=null;console.log(2);console.log("return this.OUTPUT_RESULTS:"+this.OUTPUT_RESULTS);return this.OUTPUT_RESULTS},getInputCmd:function(){return JSON.stringify(this.INPUT_CMDS)},getInputArgs:function(){return this.INPUT_ARGS},callBackJs:function(B){this.OUTPUT_RESULTS=B;console.log(1);var A=JSON.parse(B);var D=A.message;console.log("message:"+D);var C=A.status;if(C==0){if(typeof this.CALLBACK_SUCCESS!="undefined"){setTimeout("BestpayHtml5.CALLBACK_SUCCESS('"+D+"')",0)}}else{if(typeof this.CALLBACK_FAIL!="undefined"){setTimeout("BestpayHtml5.CALLBACK_FAIL('"+D+"')",0)}}console.log("你先:("+(a.idCounter)+")"+B)}};var r=function(I,G,B){console.log("exec:"+I+"_"+G);var C={service:I,action:G};var F=prompt(JSON.stringify(C),B);var E;try{E=JSON.parse(F)}catch(A){console.error(A.message)}var H=E.status;var D=E.message;if(H==0){return D}else{console.error("service:"+I+" action:"+G+" error:"+D)}};var n;var c=function(C,G,E,A,D){console.log("exec_asyn:"+C+"_"+G);var F={service:C,action:G};if(typeof D!="success"){a.CALLBACK_SUCCESS=A}if(typeof D!="undefined"){a.CALLBACK_FAIL=D}else{a.CALLBACK_FAIL=function(){}}var B=a.callNative(F,E);console.log("我先:("+(a.idCounter)+")"+B)};return{Dialog:h,App:t,exec_asyn:c,exec:r,DB_Data:i,Preference:p,Contacts:d,User:g,Toast:s,BestpayHtml5:a,Storage:z,Security:f,PasswordKeyBoard:y,Scanner:v,TalkingData:m}});