define(["jquery","bestpay.ui","bestpay.lang","bestpay.http","jtemplates"],function(g,d,h,j,i){function f(k){return document.getElementById(k)}function c(){var o=new Date();var m=o.getFullYear();var n=o.getMonth()+1;var q=o.getDate()+1;n=n<10?"0"+n:n;q=q<10?"0"+q:q;var k=o.getDay()+1;var l=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"];k=l[k];var p=m+"-"+n+"-"+q+"("+k+")";return(p)}var a=new e();function e(){a=this;this.twoJsonArray=new Array();this.manageM=config.man.manageM;this.manageMOpenAnAccount=config.man.manageMOpenAnAccount;this.zhuangru_true=false;this.zhuangchu_true=false;this.logoList={"866000":"images/bank/yzyh.png","866100":"images/bank/zgyh.png","866200":"images/bank/gsyh.png","866300":"images/bank/nyyh.png","866400":"images/bank/jtyh.png","866500":"images/bank/jsyh.png","866600":"images/bank/msyh.png","866700":"images/bank/hxyh.png","866800":"images/bank/gfyh.png","866900":"images/bank/zsyh.png","867000":"images/bank/gzyh.png","867200":"images/bank/gdyh.png","867400":"images/bank/zxyh.png","867600":"images/bank/xyyh.png","865700":"images/bank/payh.png","865500":"images/bank/shyh.png"};this.orderPageJson={};this.random=null;this.zhuanru_passWord=null;this.zhuangchu_password=null;this.iAdd="0";this.iAddyield="0"}e.prototype.financialProblemQuery=function(){var k=this;j.callCPSService({service:config.CPS.FINANCIAL_PROBLEM_QUERY,params:a.financialProblemQueryParams(),showLoading:true,success:a.financialProblemQuerySuccessCallback})};e.prototype.financialProblemQueryParams=function(){var k=this;var l={producttypeId:"01"};l=j.setCPSCommonParams(l);console.log("理财问题查询接口（SEpt015）====入参==="+JSON.stringify(l));return l};e.prototype.financialProblemQuerySuccessCallback=function(k){config.page.id_shouzhifour_show.prompt_show_back=true;console.log(config.page.id_shouzhifour_show.prompt_show_back+"config.page.id_shouzhifour_show.prompt_show_back = true;  ABC 015");console.log("理财问题查询接口（SEpt015)=====出参===="+JSON.stringify(k));if(k.code!==config.RES.SUCCESS){Bestpay.Dialog.showAlertDialog("提醒",k.content,"确定",k.code);return}config.man.manageMOpenAnAccount.messageAnnouncement();Bestpay.App.setTitle("服务中心");if(a.manageMOpenAnAccount.anountcementisBack*1==1){g("#brg_amount_question").show();a.manageM.selectType_question.setChecked("anount_question");a.manageM.questionandinformation=2;g("#changjian_question").hide();g("#gongkao_information").show();g("#id_anountmentBoxLeft").show();g("#id_anountmentBoxRight").hide();console.log("gong111");back()}a.DATAS=k.datas;var o="";var m="";if(a.DATAS!==null&&a.DATAS!=="null"&&a.DATAS!==""&&a.DATAS.length!==0&&a.DATAS!=="undefined"&&typeof a.DATAS!=="undefined"){if(a.manageM.questionandinformation==1){console.log("otherSelf.manageM.questionandinformation=="+a.manageM.questionandinformation);g("#gongkao_information").hide();g("#changjian_question").show()}else{g("#gongkao_information").show();g("#changjian_question").hide()}for(var l=0;l<a.DATAS.length;l++){var n=a.DATAS[l];m=n.problemtypeName;a.twoJsonArray[l]=n.temfProblemList;o+='<div class ="confirm-item_g question_item" data-code = '+l+">"+m+"</div>"}g("#id_optionsBoxLeft").html(o);a.getProblemtypeId();a.manageM.config_togo=false}else{g("#changjian_question").hide()}goTo(config.page.service_center);config.isBack=function(){console.log("AAA");back();g("#first_anouncement").hide()}};e.prototype.getProblemtypeId=function(){var k=this;g(".question_item").each(function(){g(this).on("click",function(){g("#id_optionsBoxLeft").hide();g("#id_optionsBoxRight").show();g("#brg_amount_question").hide();a.manageM.config_togo=true;var p=" ",n=g(this).data("code"),o=a.twoJsonArray[n];for(var l=0;l<o.length;l++){var m=o[l];p+='<div class="con"><div class="confirm_item_title confirm-item_g">'+m.title+'</div><div class="item_menu">'+m.contents+"</div></div>"}g("#id_optionsBoxRight").html(p);a.getcodeHTML()})})};e.prototype.getcodeHTML=function(){var k=this;g(".item_menu:first").show();g(".confirm_item_title:first").removeClass("confirm-item_g_s").addClass("confirm-item_g_s");g(".confirm_item_title").each(function(){g(this).on("click",function(){var l=g(".confirm_item_title").index(g(this));g(this).siblings(".item_menu").toggle();g(this).parent().siblings().children(".item_menu").hide();g(this).toggleClass("confirm-item_g_s");g(this).parent().siblings().children(".confirm_item_title").removeClass("confirm-item_g_s")})});config.isBack=function(){g("#id_optionsBoxLeft").show();g("#id_optionsBoxRight").hide();g("#brg_amount_question").show()}};e.prototype.accountBankInfo=function(){var k=this;j.callCPSService({service:config.CPS.ACCOUNT_BANK_INFO,params:k.accountBankInfoParams(),showLoading:false,success:k.accountBankInfoSuccessCallback})};e.prototype.accountBankInfoParams=function(){var k=this;var l={};l=j.setCPSCommonParams(l);console.log("账户银行信息查询接口 SCbk001入参======="+JSON.stringify(l));return l};e.prototype.accountBankInfoSuccessCallback=function(k){if(k.code!==config.RES.SUCCESS){Bestpay.Dialog.showAlertDialog("提醒",k.content,"确定",k.code);return}console.log("账户银行信息查询接口 SCbk001出参======="+JSON.stringify(k));console.log("123123:"+config.logoList[k.bankCode]);a.orderPageJson.bankName=k.bankName;a.orderPageJson.img_src=config.logoList[k.bankCode];a.orderPageJson.bankAcctNbr=k.bankAcctNbr.substr(k.bankAcctNbr.length-4,4);a.orderPageJson.bankAcctName="*"+k.bankAcctName.substring(1,k.bankAcctName.length);j.getAccountBalanceInquiry(a.getAccountBalanceInquirySuccessCallback,false)};e.prototype.WorkDayAndWorkWeekShow=function(){var k=config.man.manageMOpenAnAccount.orderPageJson.confirmWorkDay;var o=config.man.manageMOpenAnAccount.orderPageJson.confirmWorkWeek;var n=k.substring(0,4);var p=k.substring(4,6);var l=k.substring(k.length-2);var m=o.substring(o.length-1);g("#WorkDayAndWorkWeek").html(n+"-"+p+"-"+l+"(星期"+m+")")};e.prototype.getAccountBalanceInquirySuccessCallback=function(s){if(s.code!==config.RES.SUCCESS){Bestpay.Dialog.showAlertDialog("提醒",s.content,"确定",s.code);return}var o=s.accountItems;for(var n=0;n<o.length;n++){var p=o[n]["acctType"];if(p!=null||p!="null"||p!="undefined"||p!=""){if("0007"==p){var m=o[n].activeBalance;a.orderPageJson.activeBalance=h.getThausand(h.fen2yuan(m),1);a.orderPageJson.activeBalanceNoDou=h.fen2yuan(m);g("#autoActiveBalance").html(h.getThausand(h.fen2yuan(m),1));break}}}a.manageM.zhuanru_money_text.clearValue();a.manageM.zhuanchu_money_text.clearValue();a.textT(".bank_span","");a.orderPageJson.balance=a.manageMOpenAnAccount.orderPageJson.balance;if(a.manageM.applyatoneGet=="1"){var k=new d.Template();k.template_OneToOne("id_zhuangru_wrap",a.orderPageJson);if(a.manageM.zhuanruApplybuy*1==1){g("#help_cont_ZU1").show();g("#help_cont_ZU2").hide();a.manageM.bindCardZhuanru()}else{g("#help_cont_ZU1").hide();g("#help_cont_ZU2").show();g("#jy_btn_show").show();g("#input-wrap_zru_wrap").show();a.WorkDayAndWorkWeekShow()}goTo(config.page.changeover_Pay_easy);g(".cont_btn_gray_a").removeClass("cont_btn_blue_a");a.purchaseAndVerification();config.isBack=function(){console.log("otherSelf.manageM.kaohu_zhuangru_immediately=="+a.manageM.kaohu_zhuangru_immediately);if(a.manageM.kaohu_zhuangru_immediately==1){location.reload()}else{back()}}}else{var r=new d.Template();r.template_OneToOne("id_zhuangchu_wrap",a.orderPageJson);if(a.manageM.zhuangchuatonefor*1==1){g("#help_cont_CHU1").show();g("#help_cont_CHU2").hide();a.manageM.bindCardZhuanchu()}else{g("#help_cont_CHU1").hide();g("#help_cont_CHU2").show();g("#input-wrap_zchu_wrap").show();g("#jf_btn_show").show()}goTo(config.page.roll_out_Pay_easy);g(".cont_btn_gray_a").removeClass("cont_btn_blue_a");var l=function(t){if(t.length>=6){console.log("3333");g(".cont_btn_gray_a").addClass("cont_btn_blue_a")}else{console.log("4444");g(".cont_btn_gray_a").removeClass("cont_btn_blue_a")}};var q=function(){g(".cont_btn_gray_a").removeClass("cont_btn_blue_a")};a.redemptionOfPreCheck()}};e.prototype.getAutomaticSuccessCallback=function(l){console.log("余额查询 自动转入先调交费易余额查询 出参======="+JSON.stringify(l));if(l.code!==config.RES.SUCCESS){Bestpay.Dialog.showAlertDialog("提醒",l.content,"确定",l.code);return}var n=l.accountItems;for(var m=0;m<n.length;m++){var o=n[m]["acctType"];if(o!=null||o!="null"||o!="undefined"||o!=""){if("0007"==o){var k=n[m].activeBalance;g("#autoActiveBalance").html(h.getThausand(h.fen2yuan(k),1));break}}}config.man.manageMOpenAnAccount.autoCheckSettingInterface()};e.prototype.sortNumber=function(l,k){return l-k};e.prototype.comparefour=function(){var m=this;m.more_value_zu="";var k=[a.rMaxvalue,a.singleMaxvalue,a.yMaxvalue,a.activeBalance];var l=[a.rMaxvalue,a.singleMaxvalue,a.yMaxvalue];k.sort(m.sortNumber);l.sort(m.sortNumber);if(a.manageM.zhuanruApplybuy*1===2){m.more_value_zu=k[0];g("#zhuanru_money_text").attr("placeholder","最多"+h.getThausand(h.fen2yuan(m.more_value_zu),1)+"元");g("#rumaxAmount").text("本次最多可转入"+h.getThausand(h.fen2yuan(m.more_value_zu),1)+"元")}else{m.more_value_zu=l[0];m.more_value_zuThansoud="1000";g("#zhuanru_money_text").attr("placeholder","至少转入"+m.more_value_zuThansoud+"元");g("#rumaxAmount").text("该卡本次最多可转入"+h.getThausand(h.fen2yuan(m.more_value_zu),1)+"元")}};e.prototype.compareZhuangCHU=function(){var l=this;var m="";var k=[a.rMaxvalueChu,a.singleMaxvalueChu,a.yMaxvalueChu,a.balanceChu];k.sort(a.sortNumber);m=k[0];if(a.manageM.zhuangchuatonefor*1==1){g("#chumaxAmount").text("")}else{g("#chumaxAmount").text("")}g("#zhuanchu_money_text").attr("placeholder","最多"+h.getThausand(h.fen2yuan(m),1)+"元")};e.prototype.textT=function(l,k){g(l).html(k)};e.prototype.purchaseAndVerification=function(){var k=this;j.callCPSService({service:config.CPS.PURCHASE_AND_VERIFICATION,params:k.purchaseAndVerificationParams(),showLoading:false,success:k.purchaseAndVerificationSuccessCallback})};e.prototype.purchaseAndVerificationParams=function(){var k=this;var l={productId:k.manageMOpenAnAccount.productId};l=j.setCPSCommonParams(l);console.log("3.5企业理财申购预校验(MEpt002)入参======="+JSON.stringify(l));return l};e.prototype.purchaseAndVerificationSuccessCallback=function(s){var r=this;dismissDialog();if(s.code!==config.RES.SUCCESS){Bestpay.Dialog.showAlertDialog("提醒",s.content,"确定",s.code);return}console.log("3.5企业理财申购预校验(MEpt002)出参======="+JSON.stringify(s));a.zhuanru_money_text_val=a.manageM.zhuanru_money_text.getToEmptyValue();var p=s.rMaxvalue;var k=s.rMax;var q=s.singleLimitvalue;var n=s.singleMaxvalue;var o=s.yMaxvalue;var m=s.yMax;a.rMaxvalue=s.rMaxvalue;a.singleMaxvalue=s.singleMaxvalue;a.yMaxvalue=s.yMaxvalue;a.activeBalance=h.yuan2fen(a.orderPageJson.activeBalanceNoDou);if(n==null||n==""||n=="undefined"||(typeof q==="undefined")||p==null||p==""||p=="undefined"||(typeof p==="undefined")||o==null||o==""||o=="undefined"||(typeof o==="undefined")){g("#rumaxAmount").text("");g("#zhuanru_money_text").attr("placeholder","");a.comparefour()}else{a.comparefour()}function l(){a.zhuangru_true=false;a.zhuanru_money_text_val=a.manageM.zhuanru_money_text.getToEmptyValue();a.zhuanru_money_text_val=h.yuan2fen(a.zhuanru_money_text_val);if(a.zhuanru_money_text_val!=null||r.zhuanru_money_text_val.length!=0){g("#jy_btn_show").addClass("cont_btn_blue")}else{g("#jy_btn_show").addClass("cont_btn_gray").removeClass("cont_btn_blue")}if(a.zhuanru_money_text_val*1==0){a.textT(".bank_span","输入金额不能为0");return}if(k!=null&&k!=""&&k!=undefined){if(k>0){a.textT(".bank_span","")}else{a.textT(".bank_span","转入次数已超过单日最大笔数");return}}if(m!=null&&m!=""&&m!=undefined){if(m>0){a.textT(".bank_span","")}else{a.textT(".bank_span","当月最大笔数转入次数超限");return}}if(n!=null&&n!=""&&n!=undefined){if(a.zhuanru_money_text_val*1>n){a.textT(".bank_span","单笔最高金额超过有效数");return}else{a.textT(".bank_span","")}}if(p!=null&&p!=""&&p!=undefined){if(a.zhuanru_money_text_val*1>p){a.textT(".bank_span","转入金额超过单日最高金额，请重新输入");return}else{a.textT(".bank_span","")}}if(o!=null&&o!=""&&o!=undefined){if(a.zhuanru_money_text_val*1>o){a.textT(".bank_span","转入金额超过月最高金额");return}else{a.textT(".bank_span","")}}if(a.manageM.zhuanruApplybuy*1==1){if(a.zhuanru_money_text_val*1<100000){a.textT(".bank_span","单笔最低金额必须大于1000元");return}else{a.textT(".bank_span","")}}else{if(q!=null&&q!=""&&q!=undefined){if(a.zhuanru_money_text_val*1<q){a.textT(".bank_span","单笔最低金额必须大于"+(q/100).toFixed(0)+"元");return}else{a.textT(".bank_span","")}}if(a.zhuanru_money_text_val*1>a.activeBalance*1){a.textT(".bank_span","转入金额超出账户余额");return}else{a.textT(".bank_span","")}}a.zhuangru_true=true}f("zhuanru_money_text").addEventListener("input",l)};e.prototype.getapplyforBuySecretInterface=function(m){var k=this;a.orderPageJson.txnAmount=h.getThausand(h.fen2yuan(this.zhuanru_money_text_val),1);var l=new d.Template();l.template_OneToOne("id_applyBuysceret",a.orderPageJson);j.getRandomServices(function(n){var o=n;if(n.code===config.RES.SUCCESS){a.random=n.randNum}a.financialPurchase(m);config.isBack=function(){back();return}},false)};e.prototype.getapplyforBuySuccess=function(){var k=this};e.prototype.financialPurchase=function(l){var k=this;j.callCPSService({service:config.CPS.FINANCIAL_PURCHASE,params:k.financialPurchaseParams(l),showLoading:true,success:k.financialPurchaseSuccessCallback})};e.prototype.financialPurchaseParams=function(n){var k=this;var l="";if(n!=null&&n!=""){l=n}var m={payPassword:Bestpay.Security.encryptPassword(k.manageM.userInfo.staffCode,l,k.random),txnAmount:this.zhuanru_money_text_val,txnType:k.manageM.zhuanruApplybuy,productId:k.manageMOpenAnAccount.productId,userId:k.manageMOpenAnAccount.userId};m=j.setCPSCommonParams(m);console.log("3.6企业理财申购 (TEpt004)入参===="+JSON.stringify(m));return m};e.prototype.financialPurchaseSuccessCallback=function(k){dismissDialog();PasswordKeyBoard.hideKeyboardUI3();if(k.code!==config.RES.SUCCESS){if(k.code==config.RES.PASSWORD_ERROR_LOCKED_002136){Bestpay.Dialog.showAlertDialog("提醒",config.RES.PASSWORD_ERROR_LOCKED_002136_MSG,"确定",k.code,function(){App.exitCompleteApp()})}else{if(k.code==config.RES.PASSWORD_ERROR_LOCKED_020004){Bestpay.Dialog.showAlertDialog("提醒",k.content,"确定",k.code,function(){App.exitCompleteApp()})}else{Bestpay.Dialog.showAlertDialog("提醒",k.content,"确定",k.code)}}return}if(a.manageM.zhuanruApplybuy*1==2){App.queryBalance()}console.log("3.6企业理财申购 (TEpt004)出参===="+JSON.stringify(k));a.orderPageJson.transSeq=k.transSeq;a.orderPageJson.txnAmountZRU=a.orderPageJson.txnAmount;a.orderPageJson.interestDate=k.interestDate+"("+k.interestWeek+")";var l=new d.Template();l.template_OneToOne("id_zhuangru_success",a.orderPageJson);goTo(config.page.zhuangrusuccess);config.isBack=function(){location.reload()}};e.prototype.redemptionOfPreCheck=function(){var k=this;j.callCPSService({service:config.CPS.REDEMPTION_OF_PRE_CHECK,params:k.redemptionOfPreCheckParams(),showLoading:false,success:k.redemptionOfPreCheckSuccessCallback})};e.prototype.redemptionOfPreCheckParams=function(){var k=this;var l={productId:k.manageMOpenAnAccount.productId};l=j.setCPSCommonParams(l);console.log("3.5企业理财申购预校验(MEpt003)入参======="+JSON.stringify(l));return l};e.prototype.redemptionOfPreCheckSuccessCallback=function(t){var s=this;dismissDialog();if(t.code!==config.RES.SUCCESS){Bestpay.Dialog.showAlertDialog("提醒",t.content,"确定",t.code);return}console.log("3.5企业理财申购预校验(MEpt003)出参======="+JSON.stringify(t));a.zhuanchu_money_text_val=a.manageM.zhuanchu_money_text.getToEmptyValue();var q=t.rMaxvalue;var k=t.rMax;var r=t.singleLimitvalue;var o=t.singleMaxvalue;var p=t.yMaxvalue;var n=t.yMax;a.rMaxChu=t.rMax;a.rMaxvalueChu=t.rMaxvalue;a.singleMaxvalueChu=t.singleMaxvalue;a.yMaxvalueChu=t.yMaxvalue;a.balanceChu=h.yuan2fen(a.manageMOpenAnAccount.orderPageJson.balanceNoneDou);var m=h.yuan2fen(a.manageMOpenAnAccount.orderPageJson.balanceNoneDou);if(o==null||o==""||o=="undefined"||(typeof r==="undefined")||q==null||q==""||q=="undefined"||(typeof q==="undefined")||p==null||p==""||p=="undefined"||(typeof p==="undefined")){g("#chumaxAmount").text("");g("#zhuanchu_money_text").attr("placeholder","");a.compareZhuangCHU()}else{a.compareZhuangCHU()}a.textT(".rmaxbank_span",'今天还可以转出<span class="orange">'+a.rMaxChu+"</span>次");function l(){a.zhuangchu_true=false;a.zhuanchu_money_text_val=a.manageM.zhuanchu_money_text.getToEmptyValue();a.zhuanchu_money_text_val=h.yuan2fen(a.zhuanchu_money_text_val);if(a.zhuanchu_money_text_val!=null||s.zhuanchu_money_text_val.length!=0){g("#jf_btn_show").addClass("cont_btn_blue")}else{g("#jf_btn_show").addClass("cont_btn_gray").removeClass("cont_btn_blue")}if(a.zhuanchu_money_text_val*1==0){a.textT(".bank_span","输入金额不能为0");return}if(k!=null&&k!=""&&k!=undefined){if(k>0){a.textT(".bank_span","")}else{a.textT(".bank_span","转出次数已超过单日最大笔数");return}}if(n!=null&&n!=""&&n!=undefined){if(n>0){a.textT(".bank_span","")}else{a.textT(".bank_span","当月最大笔数转出次数超限");return}}if(o!=null&&o!=""&&o!=undefined){if(a.zhuanchu_money_text_val*1>o){a.textT(".bank_span","单笔最高金额超过有效数");return}else{a.textT(".bank_span","")}}if(r!=null&&r!=""&&r!=undefined){if(a.zhuanchu_money_text_val*1<r){a.textT(".bank_span","单笔最低金额必须大于"+(r/100).toFixed(0)+"元");return}else{a.textT(".bank_span","")}}if(q!=null&&q!=""&&q!=undefined){if(a.zhuanchu_money_text_val*1>q){a.textT(".bank_span","转出金额超过单日最高金额，请重新输入");return}else{a.textT(".bank_span","")}}if(p!=null&&p!=""&&p!=undefined){if(a.zhuanchu_money_text_val*1>p){a.textT(".bank_span","转出金额超过月最高金额");return}else{a.textT(".bank_span","")}}if(a.zhuanchu_money_text_val*1>m*1){a.textT(".bank_span","转出金额超出添益宝账户余额");return}else{a.textT(".bank_span","")}a.zhuangchu_true=true}f("zhuanchu_money_text").addEventListener("input",l)};e.prototype.getatoneForSecretInterface=function(m){var k=this;a.orderPageJson.txnAmountchu=h.getThausand(h.fen2yuan(k.zhuanchu_money_text_val),1);if(a.manageM.zhuangchuatonefor*1==1){a.orderPageJson.bankAcctNbrBR=a.orderPageJson.bankName+"("+a.orderPageJson.bankAcctNbr+")";g("#bank_cont_success").show();g("#jfy_cont_success").hide()}else{a.orderPageJson.bankAcctNbrBR="账户";g("#bank_cont_success").hide();g("#jfy_cont_success").show()}var l=new d.Template();l.template_OneToOne("id_atoneforsecret",a.orderPageJson);j.getRandomServices(function(n){var o=n;if(n.code===config.RES.SUCCESS){a.random=n.randNum}k.financialRedemption(m);config.isBack=function(){back();return}},false)};e.prototype.getatoneForSuccess=function(){};e.prototype.financialRedemption=function(l){var k=this;j.callCPSService({service:config.CPS.FINANCIAL_REDEMPTION,params:k.financialRedemptionParams(l),showLoading:true,success:k.financialRedemptionSuccessCallback})};e.prototype.financialRedemptionParams=function(n){var k=this;var l="";if(n!=null&&n!=""){l=n}var m={payPassword:Bestpay.Security.encryptPassword(k.manageM.userInfo.staffCode,l,k.random),txnAmount:this.zhuanchu_money_text_val,txnType:k.manageM.zhuangchuatonefor,productId:k.manageMOpenAnAccount.productId,userId:k.manageMOpenAnAccount.userId};m=j.setCPSCommonParams(m);return m};e.prototype.financialRedemptionSuccessCallback=function(k){PasswordKeyBoard.hideKeyboardUI3();dismissDialog();if(k.code!==config.RES.SUCCESS){if(k.code==config.RES.PASSWORD_ERROR_LOCKED_002136){Bestpay.Dialog.showAlertDialog("提醒",config.RES.PASSWORD_ERROR_LOCKED_002136_MSG,"确定",k.code,function(){App.exitCompleteApp()})}else{if(k.code==config.RES.PASSWORD_ERROR_LOCKED_020004){Bestpay.Dialog.showAlertDialog("提醒",k.content,"确定",k.code,function(){App.exitCompleteApp()})}else{Bestpay.Dialog.showAlertDialog("提醒",k.content,"确定",k.code)}}return}a.orderPageJson.txnAmountZCHU=a.orderPageJson.txnAmountchu;if(a.manageM.zhuangchuatonefor*1==1){a.orderPageJson.bankAcctNbr=a.orderPageJson.bankAcctNbr}else{App.queryBalance()}var l=new d.Template();l.template_OneToOne("id_atonefor_success_bank",a.orderPageJson);goTo(config.page.roll_out_success);config.isBack=function(){location.reload()}};e.prototype.financialIncomeinterface=function(){var k=this;goTo(config.page.accumulated_in);if(k.manageM.shouyitwo==2||k.manageM.shouyitwo==3){k.millionCopiesOfRevenue()}else{k.financialIncomeQuery()}};e.prototype.financialIncomeQuery=function(){var k=this;j.callCPSService({service:config.CPS.FINANCIAL_INCOME_QUERY,params:k.financialIncomeQueryParams(),showLoading:true,success:k.financialIncomeQuerySuccessCallback})};e.prototype.financialIncomeQueryParams=function(){var k=this;var l={selectType:k.manageM.shouyitwo,userId:k.manageMOpenAnAccount.userId};l=j.setCPSCommonParams(l);console.log("企业理财收益查询接口(SEpt007)"+JSON.stringify(l));return l};e.prototype.financialIncomeQuerySuccessCallback=function(l){if(l.code!==config.RES.SUCCESS){Bestpay.Dialog.showAlertDialog("提醒",l.content,"确定",l.code);return}g("#check_text_T").html("");console.log("企业理财收益查询接口(SEpt007)"+JSON.stringify(l));g("#get_money").show();g("#Noget_leiji_page").hide();g("#leijyImg").attr("src","images/get_math.png");g("#leijyImg").removeClass("leijyImg_s").addClass("leijyImg");a.orderPageJson.income=h.getThausand(h.fen2yuan(l.income),1);var o=new d.Template();o.template_OneToOne("id_income_wrap",a.orderPageJson);var p=l.datas;a.arrDIVSeven=new Array();a.arrDIVSevenDays=new Array();var k="";if(p==null||p==""||p.length<=0||p=="undefined"){g("#check_text_T").hide();g("#Noget_leiji_page").show()}else{g("#check_text_T").show();g("#Noget_leiji_page").hide();for(var n=0;n<p.length;n++){a.transactioncfmDate7=p[n]["transactioncfmDate"];a.dividendVol7=p[n]["dividendVol"];a.arrDIVSeven[a.arrDIVSeven.length]=p[n]["dividendVol"]*1;a.arrDIVSevenDays[a.arrDIVSevenDays.length]=p[n]["transactioncfmDate"]}a.maxarrSeven=b(a.arrDIVSeven,"max");console.log(a.maxarrSeven+"= otherSelf.maxarrSeven CCC");for(var m=0;m<a.arrDIVSeven.length;m++){a.percentMaxSeven=a.arrDIVSeven[m]*1/a.maxarrSeven*1;if(a.percentMaxSeven*1<0.16){a.percentMaxSeven=0.16}a.percentMaxSevenPerfouth=a.percentMaxSeven*100+"%";console.log(a.arrDIVSeven[m]+" = 当前值CCC");console.log(a.percentMaxSeven+" = 得出的百分比CCC");k+='<div class="skillbar" data-percent='+a.percentMaxSevenPerfouth+'><div class="skillbar-bar"><div class="skill-left" style="background: #ff9b26">'+a.arrDIVSevenDays[m]+'</div><div class="skillR"><div class="skill-right" style="background: #ff9b26">+'+(a.arrDIVSeven[m]/100).toFixed(2)+"</div></div></div></div>"}g("#check_text_T").html(k);g(".skillbar").each(function(){g(this).find(".skill-right").animate({width:g(this).attr("data-percent")},1000)})}};e.prototype.floatAdd=function(p,o){var n,l,k;try{n=p.toString().split(".")[1].length}catch(q){n=0}try{l=o.toString().split(".")[1].length}catch(q){l=0}k=Math.pow(10,Math.max(n,l));return(p*k+o*k)/k};e.prototype.millionCopiesOfRevenue=function(){var k=this;j.callCPSService({service:config.CPS.MILLION_COPIES_OF_REVENUE,params:k.millionCopiesOfRevenueParams(),showLoading:true,success:k.millionCopiesOfRevenueSuccessCallback})};e.prototype.millionCopiesOfRevenueParams=function(){var k=this;var l={productId:k.manageMOpenAnAccount.productId};l=j.setCPSCommonParams(l);return l};function b(k,l){if(l=="max"){return Math.max.apply(Math,k)}else{if(l=="min"){return Math.min.apply(Math,k)}}}e.prototype.millionCopiesOfRevenueSuccessCallback=function(v){if(v.code!==config.RES.SUCCESS){Bestpay.Dialog.showAlertDialog("提醒",v.content,"确定",v.code);return}g("#check_text_T").html("");a.iAdd="0";a.iAddyield="0";g("#get_money").show();g("#leijyImg").attr("src","images/get_thousand.png");g("#leijyImg").addClass("leijyImg_s");var q=v.datas;a.arrDIVfouth=new Array();a.arrDIVDaysfouth=new Array();var k="";var m=g("#ul_shouyi_first").empty().append(g("<li></li>").html("日期"));if(q==null||q==""||q.length<=0||q=="undefined"){g("#check_text_T").hide()}else{g("#check_text_T").show();if(a.manageM.shouyitwo==2){g("#leijyId").text("近一月平均万份收益(元)");for(var p=0;p<q.length;p++){a.navDatefouth=q[p]["navDate"];var s=q[p]["navDate"];a.fundIncome14=parseInt(q[p]["fundIncome"]);a.fundIncomefouth=q[p]["fundIncome"];var t=(q[p]["fundIncome"]/100).toFixed(4);var o=q[p]["fundincomeFlag"];a.iAdd=a.floatAdd(a.iAdd,Number(t));a.orderPageJson.income=(a.iAdd/p).toFixed(4);a.arrDIVfouth[a.arrDIVfouth.length]=a.fundIncomefouth*1;a.arrDIVDaysfouth[a.arrDIVDaysfouth.length]=a.navDatefouth}a.maxarrfouth=b(a.arrDIVfouth,"max");console.log(a.maxarrfouth+"= otherSelf.maxarrfouth CCC");for(var n=0;n<a.arrDIVfouth.length;n++){a.percentMaxfouth=a.arrDIVfouth[n]*1/a.maxarrfouth*1;a.percentMaxPerfouth=a.percentMaxfouth*100+"%";console.log(a.arrDIVfouth[n]+" = 当前值CCC");console.log(a.percentMaxfouth+" = 得出的百分比CCC");k+='<div class="skillbar" data-percent='+a.percentMaxPerfouth+'><div class="skillbar-bar"><div class="skill-left" style="background: #ff9b26">'+a.arrDIVDaysfouth[n]+'</div><div class="skillR"><div class="skill-right" style="background: #ff9b26">'+(a.arrDIVfouth[n]/100).toFixed(4)+"</div></div></div></div>"}}else{g("#leijyId").text("近一月平均收益率");for(var p=0;p<q.length;p++){a.navDatefouth=q[p]["navDate"];var s=q[p]["navDate"];a.yyieldfourh=q[p]["yield"];var l=(q[p]["yield"]/100).toFixed(4);var r=q[p]["yieldFlag"];a.iAddyield=a.floatAdd(a.iAddyield,Number(l));a.orderPageJson.income=(a.iAddyield/p).toFixed(4)+"%";a.arrDIVfouth[a.arrDIVfouth.length]=a.yyieldfourh*1;a.arrDIVDaysfouth[a.arrDIVDaysfouth.length]=a.navDatefouth}a.maxarrfouth=b(a.arrDIVfouth,"max");console.log(a.maxarrfouth+"= otherSelf.maxarrfouth CCC");for(var n=0;n<a.arrDIVfouth.length;n++){a.percentMaxfouth=a.arrDIVfouth[n]*1/a.maxarrfouth*1;a.percentMaxPerfouth=a.percentMaxfouth*100+"%";console.log(a.arrDIVfouth[n]+" = 当前值CCC");console.log(a.percentMaxfouth+" = 得出的百分比CCC");k+='<div class="skillbar" data-percent='+a.percentMaxPerfouth+'><div class="skillbar-bar"><div class="skill-left" style="background: #ff9b26">'+a.arrDIVDaysfouth[n]+'</div><div class="skillR"><div class="skill-right" style="background: #ff9b26">+'+(a.arrDIVfouth[n]/100).toFixed(4)+"%</div></div></div></div>"}}}g("#check_text_T").html(k);g(".skillbar").each(function(){g(this).find(".skill-right").animate({width:g(this).attr("data-percent")},1000)});var u=new d.Template();u.template_OneToOne("id_income_wrap",a.orderPageJson)};e.prototype.financialRevenueAndExpenditureinterface=function(){var k=this;g("#check_text_shouzhi").hide();g(".page_current").hide();g("#shouzhi_null_text").hide();g("#shouyi_null_text").hide();goTo(config.page.income_in);k.financialRevenueAndExpenditureQuery()};e.prototype.financialRevenueAndExpenditureQuery=function(){var k=this;j.callCPSService({service:config.CPS.FINANCIAL_REVENUE_AND_EXPENDITURE_QUERY,params:k.financialRevenueAndExpenditureQueryParams(),showLoading:true,success:k.financialRevenueAndExpenditureQuerySuccessCallback})};e.prototype.financialRevenueAndExpenditureQueryParams=function(){var k=this;var l={orderType:k.manageM.shouzhifour,userId:k.manageMOpenAnAccount.userId,pageSize:"30",currentPage:k.manageM.currentPage};l=j.setCPSCommonParams(l);return l};e.prototype.financialRevenueAndExpenditureQuerySuccessCallback=function(l){if(l.code!==config.RES.SUCCESS){Bestpay.Dialog.showAlertDialog("提醒",l.content,"确定",l.code);return}g("#time_date").html("");g("#change_type").html("");g("#money_balance").html("");g("#type_type").html("");var p=l.datas;if(p==null||p==""||p.length<=0||p=="undefined"){if(a.manageM.currentPage==1){g("#check_text_shouzhi").hide();g(".page_current").hide();if(a.manageM.shouzhifour==0){g("#shouzhi_null_text").show()}else{g("#shouzhi_null_text").hide()}if(a.manageM.shouzhifour==3||a.manageM.shouzhifour==2||a.manageM.shouzhifour==1||a.manageM.shouzhifour==7){g("#shouyi_null_text").show()}else{g("#shouyi_null_text").hide()}}else{g(".page_current").hide();return}}else{g(".page_current").show();g("#check_text_shouzhi").show();g("#shouzhi_null_text").hide();g("#shouyi_null_text").hide();var o;var q;var n="";for(var m=0,k=p.length;m<k;m++){q=p[m].accDate.split(" ");if(q[0]!==o){n+='<div class="time-line">'+q[0]+"</div>"}o=q[0];n+='<div class="income-list">';n+='<div class="box income-list-top">';if(a.manageM.shouzhifour==0||a.manageM.shouzhifour==3||a.manageM.shouzhifour==7){n+='<div class="box-f1">'+p[m].typeName+'</div><div class="box-f1 incolor">+'+h.getThausand(h.fen2yuan(p[m].amount),1)+"</div>"}else{if(a.manageM.shouzhifour==1||a.manageM.shouzhifour==2){n+='<div class="box-f1">'+p[m].typeName+'</div><div class="box-f1 outcolor">-'+h.getThausand(h.fen2yuan(p[m].amount),1)+"</div>"}}n+="</div>";n+='<div class="box income-list-bottom">';n+='<div class="box-f1">'+q[1]+'</div><div class="box-f1">成功</div>';n+="</div></div>"}g("#check_text_shouzhi").html(n);if(p.length<30){g(".page_current").hide()}}};return e});